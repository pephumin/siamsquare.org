/*!
* surveyjs Editor v0.10.3
* (c) Andrew Telnov - http://surveyjs.org/builder/
* Github - https://github.com/andrewtelnov/survey.js.editor
*/

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("survey-knockout")):"function"==typeof define&&define.amd?define("SurveyEditor",["survey-knockout"],t):"object"==typeof exports?exports.SurveyEditor=t(require("survey-knockout")):e.SurveyEditor=t(e.Survey)}(this,function(e){return function(e){function t(i){if(o[i])return o[i].exports;var r=o[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";t.__esModule=!0;var i=o(1);Object.defineProperty(t,"DragDropHelper",{enumerable:!0,get:function(){return i.DragDropHelper}});var r=o(3);Object.defineProperty(t,"SurveyPropertyEditorBase",{enumerable:!0,get:function(){return r.SurveyPropertyEditorBase}}),Object.defineProperty(t,"SurveyStringPropertyEditor",{enumerable:!0,get:function(){return r.SurveyStringPropertyEditor}}),Object.defineProperty(t,"SurveyDropdownPropertyEditor",{enumerable:!0,get:function(){return r.SurveyDropdownPropertyEditor}}),Object.defineProperty(t,"SurveyBooleanPropertyEditor",{enumerable:!0,get:function(){return r.SurveyBooleanPropertyEditor}}),Object.defineProperty(t,"SurveyNumberPropertyEditor",{enumerable:!0,get:function(){return r.SurveyNumberPropertyEditor}});var n=o(4);Object.defineProperty(t,"SurveyPropertyTextItemsEditor",{enumerable:!0,get:function(){return n.SurveyPropertyTextItemsEditor}});var s=o(5);Object.defineProperty(t,"SurveyPropertyItemsEditor",{enumerable:!0,get:function(){return s.SurveyPropertyItemsEditor}});var a=o(12);Object.defineProperty(t,"SurveyPropertyItemValuesEditor",{enumerable:!0,get:function(){return a.SurveyPropertyItemValuesEditor}});var u=o(13);Object.defineProperty(t,"SurveyPropertyDropdownColumnsEditor",{enumerable:!0,get:function(){return u.SurveyPropertyDropdownColumnsEditor}}),Object.defineProperty(t,"SurveyPropertyMatrixDropdownColumnsItem",{enumerable:!0,get:function(){return u.SurveyPropertyMatrixDropdownColumnsItem}});var l=o(6);Object.defineProperty(t,"SurveyPropertyModalEditor",{enumerable:!0,get:function(){return l.SurveyPropertyModalEditor}});var d=o(14);Object.defineProperty(t,"SurveyPropertyResultfullEditor",{enumerable:!0,get:function(){return d.SurveyPropertyResultfullEditor}});var c=o(15);Object.defineProperty(t,"SurveyPropertyTriggersEditor",{enumerable:!0,get:function(){return c.SurveyPropertyTriggersEditor}});var p=o(9);Object.defineProperty(t,"SurveyPropertyValidatorsEditor",{enumerable:!0,get:function(){return p.SurveyPropertyValidatorsEditor}});var h=o(11);Object.defineProperty(t,"SurveyObjectProperty",{enumerable:!0,get:function(){return h.SurveyObjectProperty}});var y=o(10);Object.defineProperty(t,"SurveyObjectEditor",{enumerable:!0,get:function(){return y.SurveyObjectEditor}});var v=o(16);Object.defineProperty(t,"SurveyPagesEditor",{enumerable:!0,get:function(){return v.SurveyPagesEditor}});var g=o(17);Object.defineProperty(t,"SurveyTextWorker",{enumerable:!0,get:function(){return g.SurveyTextWorker}});var b=o(8);Object.defineProperty(t,"ObjType",{enumerable:!0,get:function(){return b.ObjType}}),Object.defineProperty(t,"SurveyHelper",{enumerable:!0,get:function(){return b.SurveyHelper}});var f=o(19);Object.defineProperty(t,"SurveyEmbedingWindow",{enumerable:!0,get:function(){return f.SurveyEmbedingWindow}});var m=o(20);Object.defineProperty(t,"SurveyVerbs",{enumerable:!0,get:function(){return m.SurveyVerbs}}),Object.defineProperty(t,"SurveyVerbItem",{enumerable:!0,get:function(){return m.SurveyVerbItem}}),Object.defineProperty(t,"SurveyVerbChangeTypeItem",{enumerable:!0,get:function(){return m.SurveyVerbChangeTypeItem}}),Object.defineProperty(t,"SurveyVerbChangePageItem",{enumerable:!0,get:function(){return m.SurveyVerbChangePageItem}});var k=o(21);Object.defineProperty(t,"SurveyUndoRedo",{enumerable:!0,get:function(){return k.SurveyUndoRedo}}),Object.defineProperty(t,"UndoRedoItem",{enumerable:!0,get:function(){return k.UndoRedoItem}});var S=o(22);Object.defineProperty(t,"SurveyEditor",{enumerable:!0,get:function(){return S.SurveyEditor}})},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.DragDropHelper=void 0;var r=o(2),n=i(r);t.DragDropHelper=function(){function e(e,t,o){void 0===o&&(o=null),this.data=e,this.scrollableElement=null,this.sourceIndex=-1,this.isScrollStop=!0,this.onModifiedCallback=t,this.scrollableElement=document.getElementById(o?o:"scrollableDiv")}return Object.defineProperty(e.prototype,"survey",{get:function(){return this.data},enumerable:!0,configurable:!0}),e.prototype.startDragNewQuestion=function(e,t,o){this.prepareData(e,t,o)},e.prototype.startDragQuestion=function(e,t){this.prepareData(e,null,t)},e.prototype.startDragCopiedQuestion=function(e,t,o){this.prepareData(e,null,t,o)},e.prototype.isSurveyDragging=function(t){if(!t)return!1;var o=this.getData(t).text;return o&&0==o.indexOf(e.dataStart)},e.prototype.doDragDropOver=function(t,o){t=this.getEvent(t),this.checkScrollY(t);var i=e.dragData.targetQuestion;if(o&&o!=i&&this.isSurveyDragging(t)&&!this.isSamePlace(t,o)){var r=this.getQuestionIndex(t,o);this.sourceIndex>-1&&(this.sourceIndex!=r&&this.sourceIndex+1!=r||(r=-1)),this.survey.currentPage.koDragging(r)}},e.prototype.end=function(){this.isScrollStop=!0,this.setIsDraggingSource(this.survey.koDraggingSource(),!1),this.survey.koDraggingSource(null),this.survey.currentPage.koDragging(-1),this.sourceIndex=-1,this.clearData()},e.prototype.doDrop=function(t,o){if(void 0===o&&(o=null),t.stopPropagation&&t.stopPropagation(),this.isSurveyDragging(t)){var i=this.survey.currentPage.koDragging(),r=e.dragData.targetQuestion;if(r&&i>-1){var n=this.survey.currentPage.questions.indexOf(r);n>-1&&n<i&&i--,this.moveQuestionTo(r,i)}}this.end()},e.prototype.doLeavePage=function(e){e=this.getEvent(e),this.scrollableElement&&(e.clientX<=0||e.clientY<=0||e.clientX>=this.scrollableElement.offsetWidth||e.clientY>=this.scrollableElement.offsetHeight)&&this.survey.currentPage.koDragging(-1)},e.prototype.createTargetQuestion=function(e,t,o){if(!t)return null;var i=this.survey.getQuestionByName(t);return this.sourceIndex=-1,i&&(this.sourceIndex=this.survey.currentPage.questions.indexOf(i)),i||(o&&(i=n.QuestionFactory.Instance.createQuestion(o.type,name),(new n.JsonObject).toObject(o,i),i.name=t),!i&&e&&(i=n.QuestionFactory.Instance.createQuestion(e,t)),i.setData(this.survey),i.renderWidth="100%"),this.setIsDraggingSource(i,!0),i},e.prototype.setIsDraggingSource=function(e,t){e&&e.koIsDraggingSource&&e.koIsDraggingSource(t)},e.prototype.getQuestionIndex=function(e,t){var o=this.survey.currentPage;if(!t)return o.questions.length;var i=o.questions.indexOf(t);e=this.getEvent(e);var r=e.currentTarget.clientHeight,n=e.offsetY;return e.hasOwnProperty("layerX")&&(n=e.layerY-e.currentTarget.offsetTop),n>r/2&&i++,i},e.prototype.isSamePlace=function(t,o){var i=e.prevEvent;return!(i.question!=o||Math.abs(t.clientX-i.x)>5||Math.abs(t.clientY-i.y)>5)||(i.question=o,i.x=t.clientX,i.y=t.clientY,!1)},e.prototype.checkScrollY=function(t){if(this.scrollableElement){var o=this.getScrollableElementPosY(t);if(!(o<0)){this.isScrollStop=!0;var i=this.scrollableElement.clientHeight;o<e.ScrollOffset&&o>=0&&(this.isScrollStop=!1,this.doScrollY(-1)),i-o<e.ScrollOffset&&i>=o&&(this.isScrollStop=!1,this.doScrollY(1))}}},e.prototype.doScrollY=function(t){var o=this.scrollableElement,i=o.scrollTop+t;if(i<0)return void(this.isScrollStop=!0);o.scrollTop=i;var r=this;this.isScrollStop||setTimeout(function(){r.doScrollY(t)},e.ScrollDelay)},e.prototype.getScrollableElementPosY=function(e){return this.scrollableElement&&e.currentTarget?e.offsetY+e.currentTarget.offsetTop-this.scrollableElement.offsetTop-this.scrollableElement.scrollTop:-1},e.prototype.getEvent=function(e){return e.originalEvent?e.originalEvent:e},e.prototype.moveQuestionTo=function(e,t){if(null!=e){var o=this.survey.getPageByQuestion(e);o==this.survey.currentPage&&t==o.questions.indexOf(e)||(o&&o.removeQuestion(e),this.survey.currentPage.addQuestion(e,t),this.onModifiedCallback&&this.onModifiedCallback())}},e.prototype.getDataInfo=function(t){var o=this.getData(t);if(!o)return null;for(var i=o.text.substr(e.dataStart.length),r=i.split(","),n={json:null},s=0;s<r.length;s++){var a=r[s].split(":");n[a[0]]=a[1]}return n.json=o.json,n},e.prototype.getY=function(e){for(var t=0;e;)t+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return t},e.prototype.prepareData=function(t,o,i,r){void 0===r&&(r=null);var n=e.dataStart;o&&(n+="questiontype:"+o+","),n+="questionname:"+i,this.setData(t,n,r);var s=this.createTargetQuestion(o,i,r);e.dragData.targetQuestion=s,this.survey.koDraggingSource(s)},e.prototype.setData=function(t,o,i){void 0===i&&(i=null),t.originalEvent&&(t=t.originalEvent),t.dataTransfer&&(t.dataTransfer.setData("Text",o),t.dataTransfer.effectAllowed="copy"),e.dragData={text:o,json:i}},e.prototype.getData=function(t){if(t.originalEvent&&(t=t.originalEvent),t.dataTransfer){var o=t.dataTransfer.getData("Text");o&&(e.dragData.text=o)}return e.dragData},e.prototype.clearData=function(){e.dragData={text:"",json:null,targetQuestion:null};var t=e.prevEvent;t.question=null,t.x=-1,t.y=-1},e.dataStart="surveyjs,",e.dragData={text:"",json:null},e.prevEvent={question:null,x:-1,y:-1},e.ScrollDelay=30,e.ScrollOffset=100,e}()},function(t,o){t.exports=e},function(e,t){"use strict";t.__esModule=!0;var o=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=t.SurveyPropertyEditorBase=function(){function e(){this.value_=null,this.options=null}return e.registerEditor=function(t,o){e.editorRegisteredList[t]=o},e.createEditor=function(t,o){var i=e.editorRegisteredList[t];i||(i=e.editorRegisteredList[e.defaultEditor]);var r=i();return r.onChanged=o,r},Object.defineProperty(e.prototype,"editorType",{get:function(){throw"editorType is not defined"},enumerable:!0,configurable:!0}),e.prototype.getValueText=function(e){return e},Object.defineProperty(e.prototype,"value",{get:function(){return this.value_},set:function(e){e=this.getCorrectedValue(e),this.setValueCore(e),this.onValueChanged()},enumerable:!0,configurable:!0}),e.prototype.setValueCore=function(e){this.value_=e},e.prototype.setTitle=function(e){},e.prototype.setObject=function(e){},e.prototype.onValueChanged=function(){},e.prototype.getCorrectedValue=function(e){return e},e.defaultEditor="string",e.editorRegisteredList={},e}(),r=t.SurveyStringPropertyEditor=function(e){function t(){e.call(this)}return o(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"string"},enumerable:!0,configurable:!0}),t}(i),n=t.SurveyDropdownPropertyEditor=function(e){function t(){e.call(this)}return o(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"dropdown"},enumerable:!0,configurable:!0}),t}(i),s=t.SurveyBooleanPropertyEditor=function(e){function t(){e.call(this)}return o(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"boolean"},enumerable:!0,configurable:!0}),t}(i),a=t.SurveyNumberPropertyEditor=function(e){function t(){e.call(this)}return o(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"number"},enumerable:!0,configurable:!0}),t}(i);i.registerEditor("string",function(){return new r}),i.registerEditor("dropdown",function(){return new n}),i.registerEditor("boolean",function(){return new s}),i.registerEditor("number",function(){return new a})},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.SurveyPropertyTextItemsEditor=void 0;var r=o(5),n=o(3),s=o(8),a=o(7),u=o(9),l=o(2),d=i(l),c=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},p=t.SurveyPropertyTextItemsEditor=function(e){function t(){e.call(this)}return c(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"textitems"},enumerable:!0,configurable:!0}),t.prototype.createNewEditorItem=function(){for(var e=[],t=this.koItems(),o=0;o<t.length;o++)e.push({name:t[o].koName()});var i={koName:ko.observable(s.SurveyHelper.getNewName(e,"text")),koTitle:ko.observable()};return this.createValidatorsEditor(i,[]),i},t.prototype.createEditorItem=function(e){var t={koName:ko.observable(e.name),koTitle:ko.observable(e.title)};return this.createValidatorsEditor(t,e.validators),t},t.prototype.createItemFromEditorItem=function(e){var t=new d.MultipleTextItem(e.koName(),e.koTitle());return t.validators=e.validators,t},t.prototype.createValidatorsEditor=function(e,t){e.validators=t.slice();var o=this,i=function(t){e.validators=t,e.koText(o.getText(t.length))},r=new u.SurveyPropertyValidatorsEditor;e.editor=r,r.onChanged=function(e){i(e)},r.object=e,r.title(a.editorLocalization.getString("pe.editProperty").format("Validators")),r.value=e.validators,e.koText=ko.observable(this.getText(t.length))},t.prototype.getText=function(e){return a.editorLocalization.getString("pe.items").format(e)},t}(r.SurveyPropertyItemsEditor);n.SurveyPropertyEditorBase.registerEditor("textitems",function(){return new p})},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyPropertyItemsEditor=void 0;var i=o(6),r=o(7),n=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};t.SurveyPropertyItemsEditor=function(e){function t(){e.call(this),this.koItems=ko.observableArray(),this.value=[];var t=this;t.onDeleteClick=function(e){t.koItems.remove(e)},t.onClearClick=function(e){t.koItems.removeAll()},t.onAddClick=function(){t.AddItem()},t.onMoveUpClick=function(e){t.moveUp(e)},t.onMoveDownClick=function(e){t.moveDown(e)}}return n(t,e),t.prototype.getValueText=function(e){var t=e?e.length:0;return r.editorLocalization.getString("pe.items").format(t)},t.prototype.getCorrectedValue=function(e){return null!=e&&Array.isArray(e)||(e=[]),e},t.prototype.AddItem=function(){this.koItems.push(this.createNewEditorItem())},t.prototype.moveUp=function(e){var t=this.koItems(),o=t.indexOf(e);o<1||(t[o]=t[o-1],t[o-1]=e,this.koItems(t))},t.prototype.moveDown=function(e){var t=this.koItems(),o=t.indexOf(e);o<0||o>=t.length-1||(t[o]=t[o+1],t[o+1]=e,this.koItems(t))},t.prototype.onValueChanged=function(){this.koItems(this.getItemsFromValue())},t.prototype.getItemsFromValue=function(){for(var e=[],t=this.value,o=0;o<t.length;o++)e.push(this.createEditorItem(t[o]));return e},t.prototype.onBeforeApply=function(){for(var e=[],t=this.koItems(),o=0;o<t.length;o++)e.push(this.createItemFromEditorItem(t[o]));this.setValueCore(e)},t.prototype.createNewEditorItem=function(){throw"Override 'createNewEditorItem' method"},t.prototype.createEditorItem=function(e){return e},t.prototype.createItemFromEditorItem=function(e){return e},t}(i.SurveyPropertyModalEditor)},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyPropertyHtmlEditor=t.SurveyPropertyTextEditor=t.SurveyPropertyModalEditor=void 0;var i=o(3),r=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=t.SurveyPropertyModalEditor=function(e){function t(){e.call(this),this.title=ko.observable();var t=this;t.onApplyClick=function(){t.apply()},t.onResetClick=function(){t.reset()}}return r(t,e),t.prototype.setTitle=function(e){this.title(e)},t.prototype.hasError=function(){return!1},t.prototype.onBeforeApply=function(){},t.prototype.reset=function(){this.value=this.value},t.prototype.setObject=function(e){this.object=e},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.apply=function(){this.hasError()||(this.onBeforeApply(),this.onChanged&&this.onChanged(this.value))},t}(i.SurveyPropertyEditorBase),s=t.SurveyPropertyTextEditor=function(e){function t(){e.call(this),this.koValue=ko.observable()}return r(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"text"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditable",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.getValueText=function(e){if(!e)return null;var t=e;return t.length>20&&(t=t.substr(0,20)+"..."),t},t.prototype.onValueChanged=function(){this.koValue(this.value)},t.prototype.onBeforeApply=function(){this.setValueCore(this.koValue())},t}(n),a=t.SurveyPropertyHtmlEditor=function(e){function t(){e.call(this)}return r(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"html"},enumerable:!0,configurable:!0}),t}(s);i.SurveyPropertyEditorBase.registerEditor("text",function(){return new s}),i.SurveyPropertyEditorBase.registerEditor("html",function(){return new a})},function(e,t){"use strict";t.__esModule=!0;var o=t.editorLocalization={currentLocale:"",locales:{},getString:function(e,t){void 0===t&&(t=null),t||(t=this.currentLocale);var o=t?this.locales[this.currentLocale]:i;o||(o=i);for(var r=e.split("."),n=o,s=0;s<r.length;s++)if(n=n[r[s]],!n)return o===i?r[s]:this.getString(e,"en");return n},getPropertyName:function(e,t){void 0===t&&(t=null);var o=this.getProperty(e,t);return o.name?o.name:o},getPropertyTitle:function(e,t){void 0===t&&(t=null);var o=this.getProperty(e,t);return o.title?o.title:""},getProperty:function(e,t){void 0===t&&(t=null);var o=this.getString("p."+e,t);if(o!==e)return o;var i=e.indexOf("_");return i<-1?o:(e=e.substr(i+1),this.getString("p."+e,t))},getLocales:function(){var e=[];e.push("");for(var t in this.locales)e.push(t);return e}},i=t.defaultStrings={survey:{dropQuestion:"Please drop a question here.",copy:"Copy",addToToolbox:"Add to toolbox",deleteQuestion:"Delete Question"},qt:{checkbox:"Checkbox (MA)",comment:"Comment (OE)",dropdown:"Dropdown (SA)",file:"File Upload",html:"HTML",matrix:"Attribute (SA)",matrixdropdown:"Attribute (MA)",matrixdynamic:"Attribute (dynamic)",multipletext:"Multiple Text (OE)",radiogroup:"Radio (SA)",rating:"Rating (SA)",text:"Text (OE)"},ed:{newPageName:"page",newQuestionName:"Q",testSurvey:"Test",testSurveyAgain:"Run test again",testSurveyWidth:"Choose screen size",embedSurvey:"Embed survey",saveSurvey:"Save",designer:"Design",jsonEditor:"JSON editor",undo:"Undo",redo:"Redo",options:"Options",generateValidJSON:"Valid JSON",generateReadableJSON:"Readable JSON",toolbox:"Toolbox",delSelObject:"Delete selected object",correctJSON:"Please correct JSON.",surveyResults:"Survey result: "},pe:{apply:"Apply",reset:"Reset",close:"Close",delete:"Delete",addNew:"Add new",removeAll:"Remove all",edit:"Edit",empty:"<empty>",testService:"Test the service",value:"Value",text:"Text",required:"Required?",hasOther:"Has other item",name:"Name",title:"Title",cellType:"Type",colCount:"Count",editProperty:"Edit property '{0}'",items:"[items: {0}]",enterNewValue:"Please enter the value",noquestions:"No question in the survey",createtrigger:"Please create a trigger",triggerOn:"On ",triggerMakePagesVisible:"Make pages visible: ",triggerMakeQuestionsVisible:"Make questions visible: ",triggerCompleteText:"Complete the survey if succeed",triggerNotSet:"The trigger is not set",triggerRunIf:"Run if",triggerSetToName:"Change value of: ",triggerSetValue:"to: ",triggerIsVariable:"Do not put the variable into the survey result",verbChangeType:"Change type ",verbChangePage:"Change page "},op:{empty:"is empty",notempty:"is not empty",equal:"equals",notequal:"not equal",contains:"contains",notcontains:"not contain",greater:"greater",less:"less",greaterorequal:"greater or equals",lessorequal:"less or equals"},ew:{knockout:"Use Knockout",react:"Use React",bootstrap:"With bootstrap",standard:"Without bootstrap",showOnPage:"Show survey on a page",showInWindow:"Show survey in a window",loadFromServer:"Load survey from a server",titleScript:"Scripts",titleHtml:"HTML",titleJavaScript:"JavaScript"},p:{name:"name",title:{name:"title",title:"Leave it blank if it is the same as 'Name'"},survey_title:{name:"title",title:"It will be shown on every page"},page_title:{name:"title",title:"Page title"}}};o.locales.en=i},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyHelper=t.ObjType=void 0;var i=o(7),r=t.ObjType=void 0;!function(e){e[e.Unknown=0]="Unknown",e[e.Survey=1]="Survey",e[e.Page=2]="Page",e[e.Question=3]="Question"}(r||(t.ObjType=r={}));t.SurveyHelper=function(){function e(){}return e.getNewPageName=function(t){return e.getNewName(t,i.editorLocalization.getString("ed.newPageName"))},e.getNewQuestionName=function(t){return e.getNewName(t,i.editorLocalization.getString("ed.newQuestionName"))},e.getNewName=function(e,t){for(var o={},i=0;i<e.length;i++)o[e[i].name]=!0;for(var r=1;;){if(!o[t+r.toString()])break;r++}return t+r.toString()},e.getObjectType=function(e){return e&&e.getType?"page"==e.getType()?r.Page:"survey"==e.getType()?r.Survey:e.name?r.Question:r.Unknown:r.Unknown},e.getObjectName=function(t){if(t.name)return t.name;var o=e.getObjectType(t);if(o!=r.Page)return"";var i=t.data,n=i.pages.indexOf(t);return"[Page "+(n+1)+"]"},e}()},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.SurveyPropertyValidatorItem=t.SurveyPropertyValidatorsEditor=void 0;var r=o(5),n=o(3),s=o(10),a=o(2),u=i(a),l=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},d=t.SurveyPropertyValidatorsEditor=function(e){function t(){e.call(this),this.availableValidators=[],this.validatorClasses=[];var t=this;this.selectedObjectEditor=new s.SurveyObjectEditor,this.selectedObjectEditor.onPropertyValueChanged.add(function(e,o){t.onPropertyValueChanged(o.property,o.object,o.newValue)}),this.koSelected=ko.observable(null),this.koSelected.subscribe(function(e){t.selectedObjectEditor.selectedObject=null!=e?e.validator:null}),this.validatorClasses=u.JsonObject.metaData.getChildrenClasses("surveyvalidator",!0),this.availableValidators=this.getAvailableValidators(),this.onDeleteClick=function(){t.koItems.remove(t.koSelected())},this.onAddClick=function(e){t.addItem(e)}}return l(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"validators"},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this),this.koSelected&&this.koSelected(this.koItems().length>0?this.koItems()[0]:null)},t.prototype.createEditorItem=function(e){var t=new u.JsonObject,o=u.JsonObject.metaData.createClass(e.getType());return t.toObject(e,o),new c(o)},t.prototype.createItemFromEditorItem=function(e){var t=e;return t.validator},t.prototype.addItem=function(e){var t=new c(u.JsonObject.metaData.createClass(e));this.koItems.push(t),this.koSelected(t)},t.prototype.getAvailableValidators=function(){for(var e=[],t=0;t<this.validatorClasses.length;t++)e.push(this.validatorClasses[t].name);return e},t.prototype.onPropertyValueChanged=function(e,t,o){null!=this.koSelected()&&(this.koSelected().validator[e.name]=o)},t}(r.SurveyPropertyItemsEditor),c=t.SurveyPropertyValidatorItem=function(){function e(e){this.validator=e,this.text=e.getType()}return e}();n.SurveyPropertyEditorBase.registerEditor("validators",function(){return new d})},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.SurveyObjectEditor=void 0;var r=o(11),n=o(7),s=o(2),a=i(s);t.SurveyObjectEditor=function(){function e(e){void 0===e&&(e=null),this.propertyEditorOptions=null,this.onPropertyValueChanged=new a.Event,this.setOptions(e),this.koProperties=ko.observableArray(),this.koActiveProperty=ko.observable(),this.koHasObject=ko.observable()}return Object.defineProperty(e.prototype,"selectedObject",{get:function(){return this.selectedObjectValue},set:function(e){this.selectedObjectValue!=e&&(this.koHasObject(null!=e),this.selectedObjectValue=e,this.updateProperties(),this.updatePropertiesObject())},enumerable:!0,configurable:!0}),e.prototype.setOptions=function(e){this.propertyEditorOptions=e},e.prototype.getPropertyEditor=function(e){for(var t=this.koProperties(),o=0;o<t.length;o++)if(t[o].name==e)return t[o];return null},e.prototype.changeActiveProperty=function(e){this.koActiveProperty(e)},e.prototype.ObjectChanged=function(){this.updatePropertiesObject()},e.prototype.updateProperties=function(){var e=this;if(!this.selectedObject||!this.selectedObject.getType)return this.koProperties([]),void this.koActiveProperty(null);var t=a.JsonObject.metaData.getProperties(this.selectedObject.getType());t.sort(function(e,t){return e.name==t.name?0:e.name>t.name?1:-1});for(var o=[],i=this,s=function(t,o){i.onPropertyValueChanged.fire(e,{property:t.property,object:t.object,newValue:o})},u=0;u<t.length;u++)if(this.canShowProperty(t[u])){var l=new r.SurveyObjectProperty(t[u],s,this.propertyEditorOptions),d=this.selectedObject.getType()+"_"+t[u].name;l.displayName=n.editorLocalization.getPropertyName(d);var c=n.editorLocalization.getPropertyTitle(d);c||(c=l.displayName),l.title=c,o.push(l)}this.koProperties(o),this.koActiveProperty(this.getPropertyEditor("name"))},e.prototype.canShowProperty=function(e){var t=e.name;return"questions"!=t&&"pages"!=t&&(!this.onCanShowPropertyCallback||this.onCanShowPropertyCallback(this.selectedObject,e))},e.prototype.updatePropertiesObject=function(){for(var e=this.koProperties(),t=0;t<e.length;t++)e[t].object=this.selectedObject},e}()},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyObjectProperty=void 0;var i=o(3),r=o(7);t.SurveyObjectProperty=function(){function e(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null),this.property=e,this.isApplyingNewValue=!1,this.onPropertyChanged=t,this.name=this.property.name,this.koValue=ko.observable(),this.choices=e.choices;var r=this;this.editorType=e.type,null!=this.choices&&(this.editorType="dropdown");var n=function(e){r.onApplyEditorValue(e)};this.editor=i.SurveyPropertyEditorBase.createEditor(this.editorType,n),this.editor.options=o,this.editorType=this.editor.editorType,this.modalName="modelEditor"+this.editorType+this.name,this.modalNameTarget="#"+this.modalName,this.koValue.subscribe(function(e){r.onkoValueChanged(e)}),this.koText=ko.computed(function(){return r.getValueText(r.koValue())}),this.koIsDefault=ko.computed(function(){return r.property.isDefaultValue(r.koValue())})}return Object.defineProperty(e.prototype,"object",{get:function(){return this.objectValue},set:function(e){this.objectValue=e,this.updateValue()},enumerable:!0,configurable:!0}),e.prototype.updateValue=function(){this.isValueUpdating=!0,this.koValue(this.getValue()),this.editor.setObject(this.object),this.editor.setTitle(r.editorLocalization.getString("pe.editProperty").format(this.property.name)),this.updateEditorData(this.koValue()),this.isValueUpdating=!1},e.prototype.onApplyEditorValue=function(e){this.isApplyingNewValue=!0,this.koValue(e),this.isApplyingNewValue=!1},e.prototype.onkoValueChanged=function(e){this.isApplyingNewValue||this.updateEditorData(e),null!=this.object&&this.getValue()!=e&&(null==this.onPropertyChanged||this.isValueUpdating||this.onPropertyChanged(this,e))},e.prototype.updateEditorData=function(e){this.editor.value=e},e.prototype.getValue=function(){return this.property.hasToUseGetValue?this.property.getValue(this.object):this.object[this.name]},e.prototype.getValueText=function(e){return this.editor.getValueText(e)},e}()},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyPropertyItemValuesEditor=void 0;var i=o(5),r=o(3),n=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},s=t.SurveyPropertyItemValuesEditor=function(e){function t(){e.call(this)}return n(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"itemvalues"},enumerable:!0,configurable:!0}),t.prototype.hasError=function(){for(var e=!1,t=0;t<this.koItems().length;t++){var o=this.koItems()[t];o.koHasError(!o.koValue()),e=e||o.koHasError()}return e},t.prototype.createNewEditorItem=function(){return{koValue:ko.observable(),koText:ko.observable(),koHasError:ko.observable(!1)}},t.prototype.createEditorItem=function(e){var t=e,o=null;return e.value&&(t=e.value,o=e.text),{koValue:ko.observable(t),koText:ko.observable(o),koHasError:ko.observable(!1)}},t.prototype.createItemFromEditorItem=function(e){var t=(this.options&&this.options.alwaySaveTextInPropertyEditors,e.koText());return{value:e.koValue(),text:t}},t}(i.SurveyPropertyItemsEditor);r.SurveyPropertyEditorBase.registerEditor("itemvalues",function(){return new s})},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.SurveyPropertyMatrixDropdownColumnsItem=t.SurveyPropertyDropdownColumnsEditor=void 0;var r=o(5),n=o(3),s=o(12),a=o(2),u=i(a),l=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},d=t.SurveyPropertyDropdownColumnsEditor=function(e){function t(){e.call(this)}return l(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"matrixdropdowncolumns"},enumerable:!0,configurable:!0}),t.prototype.hasError=function(){for(var e=!1,t=0;t<this.koItems().length;t++)e=e||this.koItems()[t].hasError();return e},t.prototype.createNewEditorItem=function(){return new c(new u.MatrixDropdownColumn("",this.options))},t.prototype.createEditorItem=function(e){return new c(e,this.options)},t.prototype.createItemFromEditorItem=function(e){var t=e;return t.apply(),t.column},t}(r.SurveyPropertyItemsEditor),c=t.SurveyPropertyMatrixDropdownColumnsItem=function(){function e(e,t){void 0===t&&(t=null),this.column=e,this.options=t,this.cellTypeChoices=this.getPropertyChoices("cellType"),this.colCountChoices=this.getPropertyChoices("colCount"),this.koName=ko.observable(e.name),this.koCellType=ko.observable(e.cellType),this.koColCount=ko.observable(e.colCount),this.koIsRequired=ko.observable(!!e.isRequired),this.koHasOther=ko.observable(!!e.hasOther),this.koTitle=ko.observable(e.name===e.title?"":e.title),this.koShowChoices=ko.observable(!1),this.koChoices=ko.observableArray(e.choices),this.koHasError=ko.observable(!1),this.choicesEditor=new s.SurveyPropertyItemValuesEditor,this.choicesEditor.object=this.column,this.choicesEditor.value=this.koChoices(),this.choicesEditor.options=this.options;var o=this;this.onShowChoicesClick=function(){o.koShowChoices(!o.koShowChoices())},this.koHasChoices=ko.computed(function(){return"dropdown"==o.koCellType()||"checkbox"==o.koCellType()||"radiogroup"==o.koCellType()}),this.koHasColCount=ko.computed(function(){return"checkbox"==o.koCellType()||"radiogroup"==o.koCellType()})}return e.prototype.hasError=function(){return this.koHasError(!this.koName()),this.koHasError()||this.choicesEditor.hasError()},e.prototype.apply=function(){this.column.name=this.koName(),this.column.title=this.koTitle(),this.column.cellType=this.koCellType(),this.column.colCount=this.koColCount(),this.column.isRequired=this.koIsRequired(),this.column.hasOther=this.koHasOther(),this.choicesEditor.onApplyClick(),this.column.choices=this.choicesEditor.value},e.prototype.getPropertyChoices=function(e){for(var t=u.JsonObject.metaData.getProperties("matrixdropdowncolumn"),o=0;o<t.length;o++)if(t[o].name==e)return t[o].choices;return[]},e}();
n.SurveyPropertyEditorBase.registerEditor("matrixdropdowncolumns",function(){return new d})},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.SurveyPropertyResultfullEditor=void 0;var r=o(6),n=o(3),s=o(7),a=o(2),u=i(a),l=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},d=t.SurveyPropertyResultfullEditor=function(e){function t(){e.call(this),this.koUrl=ko.observable(),this.koPath=ko.observable(),this.koValueName=ko.observable(),this.koTitleName=ko.observable(),this.createSurvey();var t=this;this.koUrl.subscribe(function(e){t.question.choicesByUrl.url=e,t.run()}),this.koPath.subscribe(function(e){t.question.choicesByUrl.path=e,t.run()}),this.koValueName.subscribe(function(e){t.question.choicesByUrl.valueName=e,t.run()}),this.koTitleName.subscribe(function(e){t.question.choicesByUrl.titleName=e,t.run()})}return l(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"restfull"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"restfullValue",{get:function(){return this.value},enumerable:!0,configurable:!0}),t.prototype.getValueText=function(e){if(!e||!e.url)return s.editorLocalization.getString("pe.empty");var t=e.url;return t.length>20&&(t=t.substr(0,20)+"..."),t},t.prototype.onValueChanged=function(){var e=this.restfullValue;this.koUrl(e?e.url:""),this.koPath(e?e.path:""),this.koValueName(e?e.valueName:""),this.koTitleName(e?e.titleName:""),this.survey.render("restfullSurvey")},t.prototype.onBeforeApply=function(){var e=new u.ChoicesRestfull;e.url=this.koUrl(),e.path=this.koPath(),e.valueName=this.koValueName(),e.titleName=this.koTitleName(),this.setValueCore(e)},t.prototype.run=function(){this.question.choicesByUrl.run()},t.prototype.createSurvey=function(){this.survey=new u.Survey,this.survey.showNavigationButtons=!1,this.survey.showQuestionNumbers="off";var e=this.survey.addNewPage("page1");this.question=e.addNewQuestion("dropdown","q1"),this.question.title=s.editorLocalization.getString("pe.testService"),this.question.choices=[],this.survey.render("restfullSurvey")},t}(r.SurveyPropertyModalEditor);n.SurveyPropertyEditorBase.registerEditor("restfull",function(){return new d})},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.SurveyPropertyTriggerObjects=t.SurveyPropertySetValueTrigger=t.SurveyPropertyVisibleTrigger=t.SurveyPropertyTrigger=t.SurveyPropertyTriggersEditor=void 0;var r=o(5),n=o(3),s=o(7),a=o(2),u=i(a),l=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},d=t.SurveyPropertyTriggersEditor=function(e){function t(){e.call(this),this.availableTriggers=[],this.triggerClasses=[];var t=this;this.onDeleteClick=function(){t.koItems.remove(t.koSelected())},this.onAddClick=function(e){t.addItem(e)},this.koSelected=ko.observable(null),this.koPages=ko.observableArray(),this.koQuestions=ko.observableArray(),this.triggerClasses=u.JsonObject.metaData.getChildrenClasses("surveytrigger",!0),this.availableTriggers=this.getAvailableTriggers()}return l(t,e),Object.defineProperty(t.prototype,"editorType",{get:function(){return"triggers"},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this),this.object&&(this.koPages(this.getNames(this.object.pages)),this.koQuestions(this.getNames(this.object.getAllQuestions()))),this.koSelected&&this.koSelected(this.koItems().length>0?this.koItems()[0]:null)},t.prototype.addItem=function(e){var t=u.JsonObject.metaData.createClass(e),o=this.createPropertyTrigger(t);this.koItems.push(o),this.koSelected(o)},t.prototype.createEditorItem=function(e){var t=new u.JsonObject,o=u.JsonObject.metaData.createClass(e.getType());return t.toObject(e,o),this.createPropertyTrigger(o)},t.prototype.createItemFromEditorItem=function(e){var t=e;return t.createTrigger()},t.prototype.getAvailableTriggers=function(){for(var e=[],t=0;t<this.triggerClasses.length;t++)e.push(this.triggerClasses[t].name);return e},t.prototype.getNames=function(e){for(var t=[],o=0;o<e.length;o++){var i=e[o];i.name&&t.push(i.name)}return t},t.prototype.createPropertyTrigger=function(e){var t=null;return"visibletrigger"==e.getType()&&(t=new p(e,this.koPages,this.koQuestions)),"setvaluetrigger"==e.getType()&&(t=new h(e,this.koQuestions)),t||(t=new c(e)),t},t}(r.SurveyPropertyItemsEditor),c=t.SurveyPropertyTrigger=function(){function e(e){this.trigger=e,this.operators=["empty","notempty","equal","notequal","contains","notcontains","greater","less","greaterorequal","lessorequal"],this.availableOperators=[],this.createOperators(),this.triggerType=e.getType(),this.koType=ko.observable(this.triggerType),this.koName=ko.observable(e.name),this.koOperator=ko.observable(e.operator),this.koValue=ko.observable(e.value);var t=this;this.koRequireValue=ko.computed(function(){return"empty"!=t.koOperator()&&"notempty"!=t.koOperator()}),this.koIsValid=ko.computed(function(){return!(!t.koName()||t.koRequireValue()&&!t.koValue())}),this.koText=ko.computed(function(){return t.koName(),t.koOperator(),t.koValue(),t.getText()})}return e.prototype.createTrigger=function(){var e=u.JsonObject.metaData.createClass(this.triggerType);return e.name=this.koName(),e.operator=this.koOperator(),e.value=this.koValue(),e},e.prototype.createOperators=function(){for(var e=0;e<this.operators.length;e++){var t=this.operators[e];this.availableOperators.push({name:t,text:s.editorLocalization.getString("op."+t)})}},e.prototype.getText=function(){return this.koIsValid()?s.editorLocalization.getString("pe.triggerRunIf")+" '"+this.koName()+"' "+this.getOperatorText()+this.getValueText():s.editorLocalization.getString("pe.triggerNotSet")},e.prototype.getOperatorText=function(){for(var e=this.koOperator(),t=0;t<this.availableOperators.length;t++)if(this.availableOperators[t].name==e)return this.availableOperators[t].text;return e},e.prototype.getValueText=function(){return this.koRequireValue()?" "+this.koValue():""},e}(),p=t.SurveyPropertyVisibleTrigger=function(e){function t(t,o,i){e.call(this,t),this.trigger=t,this.pages=new y(s.editorLocalization.getString("pe.triggerMakePagesVisible"),o(),t.pages),this.questions=new y(s.editorLocalization.getString("pe.triggerMakeQuestionsVisible"),i(),t.questions)}return l(t,e),t.prototype.createTrigger=function(){var t=e.prototype.createTrigger.call(this);return t.pages=this.pages.koChoosen(),t.questions=this.questions.koChoosen(),t},t}(c),h=t.SurveyPropertySetValueTrigger=function(e){function t(t,o){e.call(this,t),this.trigger=t,this.koQuestions=o,this.kosetToName=ko.observable(t.setToName),this.kosetValue=ko.observable(t.setValue),this.koisVariable=ko.observable(t.isVariable)}return l(t,e),t.prototype.createTrigger=function(){var t=e.prototype.createTrigger.call(this);return t.setToName=this.kosetToName(),t.setValue=this.kosetValue(),t.isVariable=this.koisVariable(),t},t}(c),y=t.SurveyPropertyTriggerObjects=function(){function e(e,t,o){this.title=e,this.koChoosen=ko.observableArray(o);for(var i=[],r=0;r<t.length;r++){var n=t[r];o.indexOf(n)<0&&i.push(n)}this.koObjects=ko.observableArray(i),this.koSelected=ko.observable(),this.koChoosenSelected=ko.observable();var s=this;this.onDeleteClick=function(){s.deleteItem()},this.onAddClick=function(){s.addItem()}}return e.prototype.deleteItem=function(){this.changeItems(this.koChoosenSelected(),this.koChoosen,this.koObjects)},e.prototype.addItem=function(){this.changeItems(this.koSelected(),this.koObjects,this.koChoosen)},e.prototype.changeItems=function(e,t,o){t.remove(e),o.push(e),t.sort(),o.sort()},e}();n.SurveyPropertyEditorBase.registerEditor("triggers",function(){return new d})},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyPagesEditor=void 0;var i=o(8);t.SurveyPagesEditor=function(){function e(e,t,o,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===o&&(o=null),void 0===i&&(i=null),this.draggingPage=null,this.koPages=ko.observableArray(),this.koIsValid=ko.observable(!1),this.onAddNewPageCallback=e,this.onSelectPageCallback=t,this.onMovePageCallback=o,this.onDeletePageCallback=i;var r=this;this.selectPageClick=function(e){r.onSelectPageCallback&&r.onSelectPageCallback(e.page)},this.keyDown=function(e,t){r.onKeyDown(e,t)},this.dragStart=function(e){r.draggingPage=e},this.dragOver=function(e){},this.dragEnd=function(){r.draggingPage=null},this.dragDrop=function(e){r.moveDraggingPageTo(e)}}return Object.defineProperty(e.prototype,"survey",{get:function(){return this.surveyValue},set:function(e){this.surveyValue=e,this.koIsValid(null!=this.surveyValue),this.updatePages()},enumerable:!0,configurable:!0}),e.prototype.setSelectedPage=function(e){for(var t=this.koPages(),o=0;o<t.length;o++)t[o].koSelected(t[o].page==e)},e.prototype.addNewPageClick=function(){this.onAddNewPageCallback&&this.onAddNewPageCallback()},e.prototype.removePage=function(e){var t=this.getIndexByPage(e);t>-1&&this.koPages.splice(t,1)},e.prototype.changeName=function(e){var t=this.getIndexByPage(e);t>-1&&this.koPages()[t].title(i.SurveyHelper.getObjectName(e))},e.prototype.getIndexByPage=function(e){for(var t=this.koPages(),o=0;o<t.length;o++)if(t[o].page==e)return o;return-1},e.prototype.onKeyDown=function(e,t){if(!(this.koPages().length<=1)){for(var o=this.koPages(),i=-1,r=0;r<o.length;r++)o[r].page&&o[r].koSelected()&&(i=r);if(!(i<0)&&(46==t.keyCode&&this.onDeletePageCallback&&this.onDeletePageCallback(e.page),(37==t.keyCode||39==t.keyCode)&&this.onSelectPageCallback)){i+=37==t.keyCode?-1:1,i<0&&(i=o.length-1),i>=o.length&&(i=0);var n=o[i].page;this.onSelectPageCallback(n),this.setSelectedPage(n)}}},e.prototype.updatePages=function(){if(null==this.surveyValue)return void this.koPages([]);for(var e=[],t=0;t<this.surveyValue.pages.length;t++){var o=this.surveyValue.pages[t];e.push({title:ko.observable(i.SurveyHelper.getObjectName(o)),page:o,koSelected:ko.observable(!1)})}this.koPages(e)},e.prototype.moveDraggingPageTo=function(e){if(null==e||e==this.draggingPage)return void(this.draggingPage=null);if(null!=this.draggingPage){var t=this.koPages().indexOf(this.draggingPage),o=this.koPages().indexOf(e);this.onMovePageCallback&&this.onMovePageCallback(t,o)}},e}()},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.SurveyTextWorker=void 0;var r=o(18),n=o(2),s=i(n);(function(){function e(){}return e})(),t.SurveyTextWorker=function(){function e(e){this.text=e,this.text&&""!=this.text.trim()||(this.text="{}"),this.errors=[],this.process()}return Object.defineProperty(e.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isJsonCorrect",{get:function(){return null!=this.surveyValue},enumerable:!0,configurable:!0}),e.prototype.process=function(){try{this.jsonValue=new r.SurveyJSON5(1).parse(this.text)}catch(e){this.errors.push({pos:{start:e.at,end:-1},text:e.message})}if(null!=this.jsonValue&&(this.updateJsonPositions(this.jsonValue),this.surveyValue=new s.Survey(this.jsonValue),null!=this.surveyValue.jsonErrors))for(var e=0;e<this.surveyValue.jsonErrors.length;e++){var t=this.surveyValue.jsonErrors[e];this.errors.push({pos:{start:t.at,end:-1},text:t.getFullDescription()})}this.surveyObjects=this.createSurveyObjects(),this.setEditorPositionByChartAt(this.surveyObjects),this.setEditorPositionByChartAt(this.errors)},e.prototype.updateJsonPositions=function(e){e.pos.self=e;for(var t in e){var o=e[t];o&&o.pos&&(e.pos[t]=o.pos,this.updateJsonPositions(o))}},e.prototype.createSurveyObjects=function(){var e=[];if(null==this.surveyValue)return e;this.isSurveyAsPage=!1;for(var t=0;t<this.surveyValue.pages.length;t++){var o=this.surveyValue.pages[t];0!=t||o.pos||(o.pos=this.surveyValue.pos,this.isSurveyAsPage=!0),e.push(o);for(var i=0;i<o.questions.length;i++)e.push(o.questions[i])}return e},e.prototype.setEditorPositionByChartAt=function(e){if(null!=e&&0!=e.length)for(var t={row:0,column:0},o=this.getAtArray(e),i=0,r=0;r<o.length;r++){var n=o[r].at;t=this.getPostionByChartAt(t,i,n);var s=o[r].obj;s.position||(s.position={}),n==s.pos.start?s.position.start=t:n==s.pos.end&&(s.position.end=t),i=n}},e.prototype.getPostionByChartAt=function(t,o,i){for(var r={row:t.row,column:t.column},n=o;n<i;)this.text.charAt(n)==e.newLineChar?(r.row++,r.column=0):r.column++,n++;return r},e.prototype.getAtArray=function(e){for(var t=[],o=0;o<e.length;o++){var i=e[o],r=i.pos;r&&(t.push({at:r.start,obj:i}),r.end>0&&t.push({at:r.end,obj:i}))}return t.sort(function(e,t){return e.at>t.at?1:e.at<t.at?-1:0})},e}()},function(e,t){"use strict";t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.SurveyJSON5=function(){function e(e){void 0===e&&(e=0),this.parseType=e}return e.prototype.parse=function(e,t,i,r){void 0===t&&(t=null),void 0===i&&(i=0),void 0===r&&(r=-1);var n;return this.text=String(e),this.at=i,this.endAt=r,this.ch=" ",n=this.value(),this.white(),this.ch&&this.error("Syntax error"),"function"==typeof t?function e(i,r){var n,s,a=i[r];if(a&&"object"===("undefined"==typeof a?"undefined":o(a)))for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s=e(a,n),void 0!==s?a[n]=s:delete a[n]);return t.call(i,r,a)}({"":n},""):n},e.prototype.error=function(e){var t=new SyntaxError;throw t.message=e,t.at=this.at,t},e.prototype.next=function(e){return void 0===e&&(e=null),e&&e!==this.ch&&this.error("Expected '"+e+"' instead of '"+this.ch+"'"),this.ch=this.chartAt(),this.at+=1,this.ch},e.prototype.peek=function(){return this.chartAt()},e.prototype.chartAt=function(){return this.endAt>-1&&this.at>=this.endAt?"":this.text.charAt(this.at)},e.prototype.identifier=function(){var e=this.ch;for("_"!==this.ch&&"$"!==this.ch&&(this.ch<"a"||this.ch>"z")&&(this.ch<"A"||this.ch>"Z")&&this.error("Bad identifier");this.next()&&("_"===this.ch||"$"===this.ch||this.ch>="a"&&this.ch<="z"||this.ch>="A"&&this.ch<="Z"||this.ch>="0"&&this.ch<="9");)e+=this.ch;return e},e.prototype.number=function(){var e,t="",o="",i=10;if("-"!==this.ch&&"+"!==this.ch||(t=this.ch,this.next(this.ch)),"I"===this.ch)return e=this.word(),("number"!=typeof e||isNaN(e))&&this.error("Unexpected word for number"),"-"===t?-e:e;if("N"===this.ch)return e=this.word(),isNaN(e)||this.error("expected word to be NaN"),e;switch("0"===this.ch&&(o+=this.ch,this.next(),"x"===this.ch||"X"===this.ch?(o+=this.ch,this.next(),i=16):this.ch>="0"&&this.ch<="9"&&this.error("Octal literal")),i){case 10:for(;this.ch>="0"&&this.ch<="9";)o+=this.ch,this.next();if("."===this.ch)for(o+=".";this.next()&&this.ch>="0"&&this.ch<="9";)o+=this.ch;if("e"===this.ch||"E"===this.ch)for(o+=this.ch,this.next(),"-"!==this.ch&&"+"!==this.ch||(o+=this.ch,this.next());this.ch>="0"&&this.ch<="9";)o+=this.ch,this.next();break;case 16:for(;this.ch>="0"&&this.ch<="9"||this.ch>="A"&&this.ch<="F"||this.ch>="a"&&this.ch<="f";)o+=this.ch,this.next()}return e="-"===t?-o:+o,isFinite(e)?e:void this.error("Bad number")},e.prototype.string=function(){var t,o,i,r,n="";if('"'===this.ch||"'"===this.ch)for(i=this.ch;this.next();){if(this.ch===i)return this.next(),n;if("\\"===this.ch)if(this.next(),"u"===this.ch){for(r=0,o=0;o<4&&(t=parseInt(this.next(),16),isFinite(t));o+=1)r=16*r+t;n+=String.fromCharCode(r)}else if("\r"===this.ch)"\n"===this.peek()&&this.next();else{if("string"!=typeof e.escapee[this.ch])break;n+=e.escapee[this.ch]}else{if("\n"===this.ch)break;n+=this.ch}}this.error("Bad string")},e.prototype.inlineComment=function(){"/"!==this.ch&&this.error("Not an inline comment");do if(this.next(),"\n"===this.ch||"\r"===this.ch)return void this.next();while(this.ch)},e.prototype.blockComment=function(){"*"!==this.ch&&this.error("Not a block comment");do for(this.next();"*"===this.ch;)if(this.next("*"),"/"===this.ch)return void this.next("/");while(this.ch);this.error("Unterminated block comment")},e.prototype.comment=function(){"/"!==this.ch&&this.error("Not a comment"),this.next("/"),"/"===this.ch?this.inlineComment():"*"===this.ch?this.blockComment():this.error("Unrecognized comment")},e.prototype.white=function(){for(;this.ch;)if("/"===this.ch)this.comment();else{if(!(e.ws.indexOf(this.ch)>=0))return;this.next()}},e.prototype.word=function(){switch(this.ch){case"t":return this.next("t"),this.next("r"),this.next("u"),this.next("e"),!0;case"f":return this.next("f"),this.next("a"),this.next("l"),this.next("s"),this.next("e"),!1;case"n":return this.next("n"),this.next("u"),this.next("l"),this.next("l"),null;case"I":return this.next("I"),this.next("n"),this.next("f"),this.next("i"),this.next("n"),this.next("i"),this.next("t"),this.next("y"),1/0;case"N":return this.next("N"),this.next("a"),this.next("N"),NaN}this.error("Unexpected '"+this.ch+"'")},e.prototype.array=function(){var e=[];if("["===this.ch)for(this.next("["),this.white();this.ch;){if("]"===this.ch)return this.next("]"),e;if(","===this.ch?this.error("Missing array element"):e.push(this.value()),this.white(),","!==this.ch)return this.next("]"),e;this.next(","),this.white()}this.error("Bad array")},e.prototype.object=function(){var t,o,i=!0,r={};if(this.parseType>0&&(r[e.positionName]={start:this.at-1}),"{"===this.ch)for(this.next("{"),this.white(),o=this.at-1;this.ch;){if("}"===this.ch)return this.parseType>0&&(r[e.positionName].end=o),this.next("}"),r;if(t='"'===this.ch||"'"===this.ch?this.string():this.identifier(),this.white(),this.parseType>1&&(r[e.positionName][t]={start:o,valueStart:this.at}),this.next(":"),r[t]=this.value(),this.parseType>1&&(o=this.at-1,r[e.positionName][t].valueEnd=o,r[e.positionName][t].end=o),this.white(),","!==this.ch)return this.parseType>1&&(r[e.positionName][t].valueEnd--,r[e.positionName][t].end--),this.parseType>0&&(r[e.positionName].end=this.at-1),this.next("}"),r;this.parseType>1&&(r[e.positionName][t].valueEnd--,i||r[e.positionName][t].end--),this.next(","),this.white(),i=!1}this.error("Bad object")},e.prototype.value=function(){switch(this.white(),this.ch){case"{":return this.object();case"[":return this.array();case'"':case"'":return this.string();case"-":case"+":case".":return this.number();default:return this.ch>="0"&&this.ch<="9"?this.number():this.word()}},e.prototype.stringify=function(e,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),t&&"function"!=typeof t&&!this.isArray(t))throw new Error("Replacer must be a function or an array");this.replacer=t,this.indentStr=this.getIndent(o),this.objStack=[];var i={"":e};return void 0===e?this.getReplacedValueOrUndefined(i,"",!0):this.internalStringify(i,"",!0)},e.prototype.getIndent=function(e){if(e){if("string"==typeof e)return e;if("number"==typeof e&&e>=0)return this.makeIndent(" ",e,!0)}return""},e.prototype.getReplacedValueOrUndefined=function(e,t,o){var i=e[t];return i&&i.toJSON&&"function"==typeof i.toJSON&&(i=i.toJSON()),"function"==typeof this.replacer?this.replacer.call(e,t,i):this.replacer?o||this.isArray(e)||this.replacer.indexOf(t)>=0?i:void 0:i},e.prototype.isWordChar=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"_"===e||"$"===e},e.prototype.isWordStart=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e||"$"===e},e.prototype.isWord=function(e){if("string"!=typeof e)return!1;if(!this.isWordStart(e[0]))return!1;for(var t=1,o=e.length;t<o;){if(!this.isWordChar(e[t]))return!1;t++}return!0},e.prototype.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},e.prototype.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.prototype.isNaN=function(e){return"number"==typeof e&&e!==e},e.prototype.checkForCircular=function(e){for(var t=0;t<this.objStack.length;t++)if(this.objStack[t]===e)throw new TypeError("Converting circular structure to JSON")},e.prototype.makeIndent=function(e,t,o){if(void 0===o&&(o=!1),!e)return"";e.length>10&&(e=e.substring(0,10));for(var i=o?"":"\n",r=0;r<t;r++)i+=e;return i},e.prototype.escapeString=function(t){return e.escapable.lastIndex=0,e.escapable.test(t)?'"'+t.replace(e.escapable,function(t){var o=e.meta[t];return"string"==typeof o?o:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'},e.prototype.internalStringify=function(e,t,i){var r,n,s=this.getReplacedValueOrUndefined(e,t,i);switch(s&&!this.isDate(s)&&(s=s.valueOf()),"undefined"==typeof s?"undefined":o(s)){case"boolean":return s.toString();case"number":return isNaN(s)||!isFinite(s)?"null":s.toString();case"string":return this.escapeString(s.toString());case"object":if(null===s)return"null";if(this.isArray(s)){this.checkForCircular(s),r="[",this.objStack.push(s);for(var a=0;a<s.length;a++)n=this.internalStringify(s,a,!1),r+=this.makeIndent(this.indentStr,this.objStack.length),r+=null===n||"undefined"==typeof n?"null":n,a<s.length-1?r+=",":this.indentStr&&(r+="\n");this.objStack.pop(),r+=this.makeIndent(this.indentStr,this.objStack.length,!0)+"]"}else{this.checkForCircular(s),r="{";var u=!1;this.objStack.push(s);for(var l in s)if(s.hasOwnProperty(l)){var d=this.internalStringify(s,l,!1);if(i=!1,"undefined"!=typeof d&&null!==d){r+=this.makeIndent(this.indentStr,this.objStack.length),u=!0;var c=this.isWord(l)?l:this.escapeString(l);r+=c+":"+(this.indentStr?" ":"")+d+","}}this.objStack.pop(),r=u?r.substring(0,r.length-1)+this.makeIndent(this.indentStr,this.objStack.length)+"}":"{}"}return r;default:return}},e.positionName="pos",e.escapee={"'":"'",'"':'"',"\\":"\\","/":"/","\n":"",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},e.ws=[" ","\t","\r","\n","\v","\f"," ","\ufeff"],e.cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e.escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e.meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e}()},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyEmbedingWindow=void 0;var i=o(18);t.SurveyEmbedingWindow=function(){function e(){this.surveyId=null,this.surveyPostId=null,this.generateValidJSON=!1;var e=this;this.koLibraryVersion=ko.observable("knockout"),this.koShowAsWindow=ko.observable("page"),this.koScriptUsing=ko.observable("bootstrap"),this.koHasIds=ko.observable(!1),this.koLoadSurvey=ko.observable(!1),this.koHeadText=ko.observable(""),this.koJavaText=ko.observable(""),this.koBodyText=ko.observable(""),this.koVisibleHtml=ko.computed(function(){return"react"==e.koLibraryVersion()||"page"==e.koShowAsWindow()}),this.koLibraryVersion.subscribe(function(t){e.setHeadText(),e.setJavaTest()}),this.koShowAsWindow.subscribe(function(t){e.setJavaTest()}),this.koScriptUsing.subscribe(function(t){e.setHeadText(),e.setJavaTest()}),this.koLoadSurvey.subscribe(function(t){e.setJavaTest()}),this.surveyEmbedingHead=null}return Object.defineProperty(e.prototype,"json",{get:function(){return this.jsonValue},set:function(e){this.jsonValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAceEditor",{get:function(){return"undefined"!=typeof ace},enumerable:!0,configurable:!0}),e.prototype.show=function(){var e=null;this.hasAceEditor&&null==this.surveyEmbedingHead&&(this.surveyEmbedingHead=this.createEditor("surveyEmbedingHead"),e=this.createEditor("surveyEmbedingBody"),this.surveyEmbedingJava=this.createEditor("surveyEmbedingJava")),this.koHasIds(this.surveyId&&this.surveyPostId),this.setTextToEditor(e,this.koBodyText,'<div id= "mySurveyJSName" ></div>'),this.setHeadText(),this.setJavaTest()},e.prototype.setHeadText=function(){var e="";"knockout"==this.koLibraryVersion()?e='<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>\n<script src="js/survey.ko.min.js"></script>':(e='<script src="https://fb.me/react-0.14.8.js"></script>\n<script src= "https://fb.me/react-dom-0.14.8.js"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>\n',e+='<script src="js/survey.react.min.js"></script>'),"bootstrap"!=this.koScriptUsing()&&(e+='\n<link href="css/survey.css" type="text/css" rel="stylesheet" />'),this.setTextToEditor(this.surveyEmbedingHead,this.koHeadText,e)},e.prototype.setJavaTest=function(){this.setTextToEditor(this.surveyEmbedingJava,this.koJavaText,this.getJavaText())},e.prototype.createEditor=function(e){var t=ace.edit(e);return t.setTheme("ace/theme/chrome"),t.session.setMode("ace/mode/json"),t.$blockScrolling=1/0,t.setShowPrintMargin(!1),t.renderer.setShowGutter(!1),t.setReadOnly(!0),t},e.prototype.getJavaText=function(){var e="page"==this.koShowAsWindow(),t="knockout"==this.koLibraryVersion()?this.getKnockoutJavaText(e):this.getReactJavaText(e);return this.getSetCss()+t},e.prototype.getSetCss=function(){return"bootstrap"!=this.koScriptUsing()?"":'Survey.Survey.cssType = "bootstrap";\n'},e.prototype.getKnockoutJavaText=function(e){var t=e?"var survey = new Survey.Survey(\n":"var surveyWindow = new Survey.SurveyWindow(\n";t+=this.getJsonText(),t+=");\n",e||(t+="surveyWindow.");var o=this.getSaveFuncCode();return t+="survey.onComplete.add(function (s) {\n"+o+"\n });\n",e?t+='survey.render("mySurveyJSName");':(t+="//By default Survey.title is used.\n",t+='//surveyWindow.title = "My Survey Window Title.";\n',t+="surveyWindow.show();"),t},e.prototype.getReactJavaText=function(e){var t=this.getSaveFuncCode(),o="var surveySendResult = function (s) {\n"+t+"\n });\n",i=e?"ReactSurvey":"ReactSurveyWindow",r="var surveyJson = "+this.getJsonText()+"\n\n",n=r+o+"ReactDOM.render(\n<"+i+' json={surveyJson} onComplete={surveySendResult} />, \n document.getElementById("mySurveyJSName"));';return n},e.prototype.getSaveFuncCode=function(){return this.koHasIds()?"survey.sendResult('"+this.surveyPostId+"');":'alert("The results are:" + JSON.stringify(s.data));'},e.prototype.getJsonText=function(){return this.koHasIds()&&this.koLoadSurvey()?"{ surveyId: '"+this.surveyId+"'}":this.generateValidJSON?JSON.stringify(this.json):(new i.SurveyJSON5).stringify(this.json)},e.prototype.setTextToEditor=function(e,t,o){e&&e.setValue(o),t&&t(o)},e}()},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.SurveyVerbChangePageItem=t.SurveyVerbChangeTypeItem=t.SurveyVerbItem=t.SurveyVerbs=void 0;var r=o(7),n=o(8),s=o(2),a=i(s),u=function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},l=(t.SurveyVerbs=function(){function e(e){this.onModifiedCallback=e,this.koVerbs=ko.observableArray(),this.koHasVerbs=ko.observable();var t=a.JsonObject.metaData.getChildrenClasses("selectbase",!0);this.choicesClasses=[];for(var o=0;o<t.length;o++)this.choicesClasses.push(t[o].name)}return Object.defineProperty(e.prototype,"survey",{get:function(){return this.surveyValue},set:function(e){this.survey!=e&&(this.surveyValue=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"obj",{get:function(){return this.objValue},set:function(e){this.objValue!=e&&(this.objValue=e,this.buildVerbs())},enumerable:!0,configurable:!0}),e.prototype.buildVerbs=function(){var e=[],t=n.SurveyHelper.getObjectType(this.obj);if(t==n.ObjType.Question){var o=this.obj;this.survey.pages.length>1&&e.push(new c(this.survey,o,this.onModifiedCallback)),this.choicesClasses.indexOf(o.getType())>-1&&e.push(new d(this.survey,o,this.onModifiedCallback))}this.koVerbs(e),this.koHasVerbs(e.length>0)},e}(),t.SurveyVerbItem=function(){function e(e,t,o){this.survey=e,this.question=t,this.onModifiedCallback=o,this.koItems=ko.observableArray(),this.koSelectedItem=ko.observable()}return Object.defineProperty(e.prototype,"text",{get:function(){return""},enumerable:!0,configurable:!0}),e}()),d=t.SurveyVerbChangeTypeItem=function(e){function t(t,o,i){e.call(this,t,o,i),this.survey=t,this.question=o,this.onModifiedCallback=i;for(var n=a.JsonObject.metaData.getChildrenClasses("selectbase",!0),s=[],u=0;u<n.length;u++)s.push({value:n[u].name,text:r.editorLocalization.getString("qt."+n[u].name)});this.koItems(s),this.koSelectedItem(o.getType());var l=this;this.koSelectedItem.subscribe(function(e){l.changeType(e)})}return u(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return r.editorLocalization.getString("pe.verbChangeType")},enumerable:!0,configurable:!0}),t.prototype.changeType=function(e){if(e!=this.question.getType()){var t=this.survey.getPageByQuestion(this.question),o=t.questions.indexOf(this.question),i=a.QuestionFactory.Instance.createQuestion(e,this.question.name),r=new a.JsonObject,n=r.toJsonObject(this.question);r.toObject(n,i),t.removeQuestion(this.question),t.addQuestion(i,o),this.onModifiedCallback&&this.onModifiedCallback()}},t}(l),c=t.SurveyVerbChangePageItem=function(e){function t(t,o,i){e.call(this,t,o,i),this.survey=t,this.question=o,this.onModifiedCallback=i;for(var r=[],s=0;s<this.survey.pages.length;s++){var a=this.survey.pages[s];r.push({value:a,text:n.SurveyHelper.getObjectName(a)})}this.koItems(r),this.prevPage=this.survey.getPageByQuestion(o),this.koSelectedItem(this.prevPage);var u=this;this.koSelectedItem.subscribe(function(e){u.changePage(e)})}return u(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return r.editorLocalization.getString("pe.verbChangePage")},enumerable:!0,configurable:!0}),t.prototype.changePage=function(e){null!=e&&e!=this.prevPage&&(this.prevPage.removeQuestion(this.question),e.addQuestion(this.question),this.onModifiedCallback&&this.onModifiedCallback())},t}(l)},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.__esModule=!0,t.UndoRedoItem=t.SurveyUndoRedo=void 0;var r=o(2),n=i(r),s=(t.SurveyUndoRedo=function(){function e(){this.index=-1,this.maximumCount=10,this.items=[],this.koCanUndo=ko.observable(!1),this.koCanRedo=ko.observable(!1)}return e.prototype.clear=function(){this.items=[],this.koCanUndo(!1),this.koCanRedo(!1)},e.prototype.setCurrent=function(e,t){var o=new s;o.surveyJSON=(new n.JsonObject).toJsonObject(e),o.selectedObjName=t,this.index<this.items.length-1&&this.items.splice(this.index+1),this.items.push(o),this.removeOldData(),this.index=this.items.length-1,this.updateCanUndoRedo()},e.prototype.undo=function(){return this.canUndo?this.doUndoRedo(-1):null},e.prototype.redo=function(){return this.canRedo?this.doUndoRedo(1):null},e.prototype.updateCanUndoRedo=function(){this.koCanUndo(this.canUndo),this.koCanRedo(this.canRedo)},e.prototype.doUndoRedo=function(e){return this.index+=e,this.updateCanUndoRedo(),this.index>=0&&this.index<this.items.length?this.items[this.index]:null},Object.defineProperty(e.prototype,"canUndo",{get:function(){return this.index>=1&&this.index<this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this.items.length>1&&this.index<this.items.length-1},enumerable:!0,configurable:!0}),e.prototype.removeOldData=function(){this.items.length-1<this.maximumCount||this.items.splice(0,this.items.length-this.maximumCount-1)},e}(),t.UndoRedoItem=function(){function e(){}return e}())},function(e,t,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);
return t.default=e,t}t.__esModule=!0,t.SurveyEditor=void 0;var r=o(7),n=o(10),s=o(16),a=o(19),u=o(23),l=o(20),d=o(24),c=o(17),p=o(21),h=o(8),y=o(1),v=o(18),g=o(25),b=o(26),f=o(27),m=o(2),k=i(m);t.SurveyEditor=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.stateValue="",this.dragDropHelper=null,this.surveyId=null,this.surveyPostId=null,this.alwaySaveTextInPropertyEditors=!1,this.onCanShowProperty=new k.Event,this.saveNo=0,this.koShowOptions=ko.observable(),this.koGenerateValidJSON=ko.observable(),this.setOptions(t),this.koCopiedQuestions=ko.observableArray(),this.koCanDeleteObject=ko.observable(!1);var o=this;this.koState=ko.observable(),this.koShowSaveButton=ko.observable(!1),this.koTestSurveyWidth=ko.observable("100%"),this.saveButtonClick=function(){o.doSave()},this.koObjects=ko.observableArray(),this.koSelectedObject=ko.observable(),this.koSelectedObject.subscribe(function(e){o.selectedObjectChanged(null!=e?e.value:null)}),this.koGenerateValidJSON.subscribe(function(e){o.options||(o.options={}),o.options.generateValidJSON=e,o.generateValidJSONChangedCallback&&o.generateValidJSONChangedCallback(e)}),this.surveyObjects=new u.SurveyObjects(this.koObjects,this.koSelectedObject),this.undoRedo=new p.SurveyUndoRedo,this.surveyVerbs=new l.SurveyVerbs(function(){o.setModified()}),this.selectedObjectEditor=new n.SurveyObjectEditor(this.options),this.selectedObjectEditor.onCanShowPropertyCallback=function(e,t){return o.onCanShowObjectProperty(e,t)},this.selectedObjectEditor.onPropertyValueChanged.add(function(e,t){o.onPropertyValueChanged(t.property,t.object,t.newValue)}),this.pagesEditor=new s.SurveyPagesEditor(function(){o.addPage()},function(e){o.surveyObjects.selectObject(e)},function(e,t){o.movePage(e,t)},function(e){o.deleteCurrentObject()}),this.surveyEmbeding=new a.SurveyEmbedingWindow,this.koViewType=ko.observable("designer"),this.koIsShowDesigner=ko.computed(function(){return"designer"==o.koViewType()}),this.selectDesignerClick=function(){o.showDesigner()},this.selectEditorClick=function(){o.showJsonEditor()},this.selectTestClick=function(){o.showTestSurvey()},this.selectEmbedClick=function(){o.showEmbedEditor()},this.generateValidJSONClick=function(){o.koGenerateValidJSON(!0)},this.generateReadableJSONClick=function(){o.koGenerateValidJSON(!1)},this.runSurveyClick=function(){o.showLiveSurvey()},this.embedingSurveyClick=function(){o.showSurveyEmbeding()},this.deleteObjectClick=function(){o.deleteCurrentObject()},this.draggingQuestion=function(e,t){o.doDraggingQuestion(e,t)},this.clickQuestion=function(e){o.doClickQuestion(e)},this.draggingCopiedQuestion=function(e,t){o.doDraggingCopiedQuestion(e.json,t)},this.clickCopiedQuestion=function(e){o.doClickCopiedQuestion(e.json)},this.dragEnd=function(e,t){o.dragDropHelper.end()},this.doUndoClick=function(){o.doUndoRedo(o.undoRedo.undo())},this.doRedoClick=function(){o.doUndoRedo(o.undoRedo.redo())},this.jsonEditor=new d.SurveyJSONEditor,e&&this.render(e)}return e.prototype.setOptions=function(e){this.options=e,this.questionTypes=this.getQuestionTypes(),this.showJSONEditorTabValue=!e||"undefined"==typeof e.showJSONEditorTab||e.showJSONEditorTab,this.showTestSurveyTabValue=!e||"undefined"==typeof e.showTestSurveyTab||e.showTestSurveyTab,this.showEmbededSurveyTabValue=!(!e||"undefined"==typeof e.showEmbededSurveyTab)&&e.showEmbededSurveyTab,this.koShowOptions(!(!e||"undefined"==typeof e.showOptions)&&e.showOptions),this.koGenerateValidJSON(this.options&&this.options.generateValidJSON),this.selectedObjectEditor&&this.selectedObjectEditor.setOptions(e)},Object.defineProperty(e.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!0,configurable:!0}),e.prototype.render=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),t&&this.setOptions(t);var o=this;e&&"string"==typeof e&&(e=document.getElementById(e)),e&&(this.renderedElement=e),e=this.renderedElement,e&&(e.innerHTML=g.html,o.applyBinding())},e.prototype.loadSurvey=function(e){var t=this;(new k.dxSurveyService).loadSurvey(e,function(e,o,i){e&&o&&(t.text=JSON.stringify(o))})},Object.defineProperty(e.prototype,"text",{get:function(){return this.koIsShowDesigner()?this.getSurveyTextFromDesigner():this.jsonEditor.text},set:function(e){var t=new c.SurveyTextWorker(e);t.isJsonCorrect?(this.initSurvey((new k.JsonObject).toJsonObject(t.survey)),this.showDesigner(),this.setUndoRedoCurrentState(!0)):(this.setTextValue(e),this.koViewType("editor"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.stateValue},enumerable:!0,configurable:!0}),e.prototype.setState=function(e){this.stateValue=e,this.koState(this.state)},e.prototype.doSave=function(){if(this.setState("saving"),this.saveSurveyFunc){this.saveNo++;var e=this;this.saveSurveyFunc(this.saveNo,function(t,o){e.setState("saved"),e.saveNo==t&&o&&e.setState("saved")})}},e.prototype.setModified=function(){this.setState("modified"),this.setUndoRedoCurrentState()},e.prototype.setUndoRedoCurrentState=function(e){void 0===e&&(e=!1),e&&this.undoRedo.clear();var t=this.koSelectedObject()?this.koSelectedObject().value:null;this.undoRedo.setCurrent(this.surveyValue,t?t.name:null)},Object.defineProperty(e.prototype,"saveSurveyFunc",{get:function(){return this.saveSurveyFuncValue},set:function(e){this.saveSurveyFuncValue=e,this.koShowSaveButton(null!=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOptions",{get:function(){return this.koShowOptions()},set:function(e){this.koShowOptions(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showJSONEditorTab",{get:function(){return this.showJSONEditorTabValue},set:function(e){this.showJSONEditorTabValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTestSurveyTab",{get:function(){return this.showTestSurveyTabValue},set:function(e){this.showTestSurveyTabValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEmbededSurveyTab",{get:function(){return this.showEmbededSurveyTabValue},set:function(e){this.showEmbededSurveyTabValue=e},enumerable:!0,configurable:!0}),e.prototype.onCanShowObjectProperty=function(e,t){var o={obj:e,property:t,canShow:!0};return this.onCanShowProperty.fire(this,o),o.canShow},e.prototype.setTextValue=function(e){this.jsonEditor.text=e},e.prototype.addPage=function(){var e=h.SurveyHelper.getNewPageName(this.survey.pages),t=this.surveyValue.addNewPage(e);this.addPageToUI(t),this.setModified()},e.prototype.getLocString=function(e){return r.editorLocalization.getString(e)},e.prototype.getQuestionTypes=function(){var e=k.QuestionFactory.Instance.getAllTypes();if(!this.options||!this.options.questionTypes||!this.options.questionTypes.length)return e;for(var t=[],o=0;o<this.options.questionTypes.length;o++){var i=this.options.questionTypes[o];e.indexOf(i)>-1&&t.push(i)}return t},e.prototype.movePage=function(e,t){var o=this.survey.pages[e];this.survey.pages.splice(e,1),this.survey.pages.splice(t,0,o),this.pagesEditor.survey=this.survey,this.surveyObjects.selectObject(o),this.setModified()},e.prototype.addPageToUI=function(e){this.pagesEditor.survey=this.surveyValue,this.surveyObjects.addPage(e)},e.prototype.onQuestionAdded=function(e){var t=this.survey.getPageByQuestion(e);this.surveyObjects.addQuestion(t,e),this.survey.render()},e.prototype.onQuestionRemoved=function(e){this.surveyObjects.removeObject(e),this.survey.render()},e.prototype.onPropertyValueChanged=function(e,t,o){e.isDefaultValue(o);t[e.name]=o,"name"==e.name&&(this.surveyObjects.nameChanged(t),h.SurveyHelper.getObjectType(t)==h.ObjType.Page&&this.pagesEditor.changeName(t)),this.setModified(),this.survey.render()},e.prototype.doUndoRedo=function(e){if(this.initSurvey(e.surveyJSON),e.selectedObjName){var t=this.findObjByName(e.selectedObjName);t&&this.surveyObjects.selectObject(t)}this.setState(this.undoRedo.koCanUndo()?"modified":"saved")},e.prototype.findObjByName=function(e){var t=this.survey.getPageByName(e);if(t)return t;var o=this.survey.getQuestionByName(e);return o?o:null},e.prototype.canSwitchViewType=function(e){return(!e||this.koViewType()!=e)&&("editor"!=this.koViewType()||(this.jsonEditor.isJsonCorrect?(this.initSurvey((new k.JsonObject).toJsonObject(this.jsonEditor.survey)),!0):(alert(this.getLocString("ed.correctJSON")),!1)))},e.prototype.showDesigner=function(){this.canSwitchViewType("designer")&&this.koViewType("designer")},e.prototype.showJsonEditor=function(){"editor"!=this.koViewType()&&(this.jsonEditor.show(this.getSurveyTextFromDesigner()),this.koViewType("editor"))},e.prototype.showTestSurvey=function(){this.canSwitchViewType(null)&&(this.showLiveSurvey(),this.koViewType("test"))},e.prototype.showEmbedEditor=function(){this.canSwitchViewType("embed")&&(this.showSurveyEmbeding(),this.koViewType("embed"))},e.prototype.getSurveyTextFromDesigner=function(){var e=(new k.JsonObject).toJsonObject(this.survey);return this.options&&this.options.generateValidJSON?JSON.stringify(e,null,1):(new v.SurveyJSON5).stringify(e,null,1)},e.prototype.selectedObjectChanged=function(e){var t=!1;this.selectedObjectEditor.selectedObject=e,this.surveyVerbs.obj=e;var o=h.SurveyHelper.getObjectType(e);o==h.ObjType.Page&&(this.survey.currentPage=e,t=this.survey.pages.length>1),o==h.ObjType.Question?(this.survey.setselectedQuestion(e),t=!0,this.survey.currentPage=this.survey.getPageByQuestion(this.survey.selectedQuestionValue)):this.survey.setselectedQuestion(null),this.koCanDeleteObject(t)},e.prototype.applyBinding=function(){if(null!=this.renderedElement){if(ko.cleanNode(this.renderedElement),ko.applyBindings(this,this.renderedElement),this.surveyjs=document.getElementById("surveyjs"),this.surveyjs){var t=this;this.surveyjs.onkeydown=function(e){e&&(46==e.keyCode&&t.deleteQuestion(),38!=e.keyCode&&40!=e.keyCode||t.selectQuestion(38==e.keyCode))}}this.surveyjsExample=document.getElementById("surveyjsExample"),this.initSurvey((new v.SurveyJSON5).parse(e.defaultNewSurveyText)),this.setUndoRedoCurrentState(!0),this.surveyValue.mode="designer",this.surveyValue.setDesignMode&&this.surveyValue.setDesignMode(!0),this.surveyValue.render(this.surveyjs),this.jsonEditor.init()}},e.prototype.initSurvey=function(t){var o=this;this.surveyValue=new k.Survey,this.dragDropHelper=new y.DragDropHelper(this.survey,function(){o.setModified()}),this.surveyValue.dragDropHelper=this.dragDropHelper,this.surveyValue.setJsonObject(t),this.surveyValue.isEmpty&&(this.surveyValue=new k.Survey((new v.SurveyJSON5).parse(e.defaultNewSurveyText))),this.survey.mode="designer",this.survey.setDesignMode&&this.survey.setDesignMode(!0),this.survey.render(this.surveyjs),this.surveyObjects.survey=this.survey,this.pagesEditor.survey=this.survey,this.pagesEditor.setSelectedPage(this.survey.currentPage),this.surveyVerbs.survey=this.survey,this.surveyValue.onSelectedQuestionChanged.add(function(e,t){o.surveyObjects.selectObject(e.selectedQuestionValue)}),this.surveyValue.onCopyQuestion.add(function(e,t){o.copyQuestion(o.koSelectedObject().value)}),this.surveyValue.onFastCopyQuestion.add(function(e,t){o.fastCopyQuestion(o.koSelectedObject().value)}),this.surveyValue.onDeleteCurrentObject.add(function(e,t){o.deleteCurrentObject()}),this.surveyValue.onProcessHtml.add(function(e,t){t.html=o.processHtml(t.html)}),this.surveyValue.onCurrentPageChanged.add(function(e,t){o.pagesEditor.setSelectedPage(e.currentPage)}),this.surveyValue.onQuestionAdded.add(function(e,t){o.onQuestionAdded(t.question)}),this.surveyValue.onQuestionRemoved.add(function(e,t){o.onQuestionRemoved(t.question)})},e.prototype.processHtml=function(e){if(!e)return e;for(var t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;t.test(e);)e=e.replace(t,"");return e},e.prototype.doDraggingQuestion=function(e,t){this.dragDropHelper.startDragNewQuestion(t,e,this.getNewQuestionName())},e.prototype.doDraggingCopiedQuestion=function(e,t){this.dragDropHelper.startDragCopiedQuestion(t,this.getNewQuestionName(),e)},e.prototype.doClickQuestion=function(e){this.doClickQuestionCore(k.QuestionFactory.Instance.createQuestion(e,this.getNewQuestionName()))},e.prototype.doClickCopiedQuestion=function(e){var t=this.getNewQuestionName(),o=k.QuestionFactory.Instance.createQuestion(e.type,t);(new k.JsonObject).toObject(e,o),o.name=t,this.doClickQuestionCore(o)},e.prototype.getNewQuestionName=function(){return h.SurveyHelper.getNewQuestionName(this.survey.getAllQuestions())},e.prototype.doClickQuestionCore=function(e){var t=this.survey.currentPage,o=-1;null!=this.survey.selectedQuestionValue&&(o=t.questions.indexOf(this.survey.selectedQuestionValue)+1),t.addQuestion(e,o),this.setModified()},e.prototype.deleteQuestion=function(){var e=this.getSelectedObjAsQuestion();e&&this.deleteCurrentObject()},e.prototype.selectQuestion=function(e){var t=this.getSelectedObjAsQuestion();t&&this.surveyObjects.selectNextQuestion(e)},e.prototype.getSelectedObjAsQuestion=function(){var e=this.koSelectedObject().value;return e&&h.SurveyHelper.getObjectType(e)==h.ObjType.Question?e:null},e.prototype.deleteCurrentObject=function(){this.deleteObject(this.koSelectedObject().value)},e.prototype.copyQuestion=function(e){var t=h.SurveyHelper.getObjectType(e);if(t==h.ObjType.Question){var o=(new k.JsonObject).toJsonObject(e);o.type=e.getType();var i=this.getCopiedQuestionByName(e.name);i?i.json=o:this.koCopiedQuestions.push({name:e.name,json:o}),this.koCopiedQuestions().length>3&&this.koCopiedQuestions.splice(0,1)}},e.prototype.fastCopyQuestion=function(e){var t=(new k.JsonObject).toJsonObject(e);t.type=e.getType(),this.doClickCopiedQuestion(t)},e.prototype.getCopiedQuestionByName=function(e){for(var t=this.koCopiedQuestions(),o=0;o<t.length;o++)if(t[o].name==e)return t[o];return null},e.prototype.deleteObject=function(e){this.surveyObjects.removeObject(e);var t=h.SurveyHelper.getObjectType(e);t==h.ObjType.Page&&(this.survey.removePage(e),this.pagesEditor.removePage(e),this.setModified()),t==h.ObjType.Question&&(this.survey.currentPage.removeQuestion(e),this.survey.setselectedQuestion(null),this.surveyObjects.selectObject(this.survey.currentPage),this.setModified()),this.survey.render()},e.prototype.showLiveSurvey=function(){var e=this;if(this.surveyjsExample){var t=this.getSurveyJSON();if(null!=t){t.cookieName&&delete t.cookieName;var o=new k.Survey(t),i=document.getElementById("surveyjsExampleResults"),r=document.getElementById("surveyjsExamplereRun");i&&(i.innerHTML=""),r&&(r.style.display="none"),o.onComplete.add(function(t){i&&(i.innerHTML=e.getLocString("ed.surveyResults")+JSON.stringify(o.data)),r&&(r.style.display="")}),o.render(this.surveyjsExample)}else this.surveyjsExample.innerHTML=this.getLocString("ed.correctJSON")}},e.prototype.showSurveyEmbeding=function(){var e=this.getSurveyJSON();this.surveyEmbeding.json=e,this.surveyEmbeding.surveyId=this.surveyId,this.surveyEmbeding.surveyPostId=this.surveyPostId,this.surveyEmbeding.generateValidJSON=this.options&&this.options.generateValidJSON,this.surveyEmbeding.show()},e.prototype.getSurveyJSON=function(){return this.koIsShowDesigner()?(new k.JsonObject).toJsonObject(this.survey):this.jsonEditor.isJsonCorrect?(new k.JsonObject).toJsonObject(this.jsonEditor.survey):null},e.prototype.createAnnotations=function(e,t){for(var o=new Array,i=0;i<t.length;i++){var r=t[i],n={row:r.position.start.row,column:r.position.start.column,text:r.text,type:"error"};o.push(n)}return o},e.defaultNewSurveyText="{ pages: [{ name: 'page1' }] }",e}();k.Survey.cssType="bootstrap",(new k.SurveyTemplateText).replaceText(b.html,"page"),(new k.SurveyTemplateText).replaceText(f.html,"question"),k.Survey.prototype.onCreating=function(){this.selectedQuestionValue=null,this.onSelectedQuestionChanged=new k.Event,this.onCopyQuestion=new k.Event,this.onFastCopyQuestion=new k.Event,this.onDeleteCurrentObject=new k.Event;var e=this;this.copyQuestionClick=function(){e.onCopyQuestion.fire(e)},this.fastCopyQuestionClick=function(){e.onFastCopyQuestion.fire(e)},this.deleteCurrentObjectClick=function(){e.onDeleteCurrentObject.fire(e)},this.koDraggingSource=ko.observable(null)},k.Survey.prototype.setselectedQuestion=function(e){if(e!=this.selectedQuestionValue){var t=this.selectedQuestionValue;this.selectedQuestionValue=e,null!=t&&t.onSelectedQuestionChanged(),null!=this.selectedQuestionValue&&this.selectedQuestionValue.onSelectedQuestionChanged(),this.onSelectedQuestionChanged.fire(this,{oldSelectedQuestion:t,newSelectedQuestion:e})}},k.Survey.prototype.getEditorLocString=function(e){return r.editorLocalization.getString(e)},k.Page.prototype.onCreating=function(){var e=this;this.dragEnterCounter=0,this.koDragging=ko.observable(-1),this.koDraggingQuestion=ko.observable(null),this.koDraggingBottom=ko.observable(!1),this.koDragging.subscribe(function(t){if(t<0)e.dragEnterCounter=0,e.koDraggingQuestion(null),e.koDraggingBottom(!1);else{var o=t>=0&&t<e.questions.length?e.questions[t]:null;e.koDraggingQuestion(o),e.koDraggingBottom(t==e.questions.length)}}),this.koDraggingQuestion.subscribe(function(e){e&&e.koIsDragging(!0)}),this.koDraggingQuestion.subscribe(function(e){e&&e.koIsDragging(!1)},this,"beforeChange"),this.dragEnter=function(t){t.preventDefault(),e.dragEnterCounter++,e.doDragEnter(t)},this.dragLeave=function(t){e.dragEnterCounter--,0===e.dragEnterCounter&&e.doDragLeave(t)},this.dragDrop=function(t){e.doDrop(t)}},k.Page.prototype.doDrop=function(e){var t=this.data.dragDropHelper;t&&t.doDrop(e)},k.Page.prototype.doDragEnter=function(e){if(!(this.questions.length>0||this.koDragging()>0)){var t=this.data.dragDropHelper;t&&t.isSurveyDragging(e)&&this.koDragging(0)}},k.Page.prototype.doDragLeave=function(e){var t=this.data.dragDropHelper;t&&t.doLeavePage(e)},k.QuestionBase.prototype.onCreating=function(){var e=this;this.dragDropHelperValue=null,this.koIsDragging=ko.observable(!1),this.koIsDraggingSource=ko.observable(!1),this.dragDropHelper=function(){return null==e.dragDropHelperValue&&(e.dragDropHelperValue=e.data.dragDropHelper),e.dragDropHelperValue},this.dragOver=function(t){e.dragDropHelper().doDragDropOver(t,e)},this.dragDrop=function(t){e.dragDropHelper().doDrop(t,e)},this.dragStart=function(t){e.dragDropHelper().startDragQuestion(t,e.name)},this.dragEnd=function(t){e.dragDropHelper().end()},this.koIsSelected=ko.observable(!1),this.koOnClick=function(){null!=e.data&&e.data.setselectedQuestion(this)}},k.QuestionBase.prototype.onSelectedQuestionChanged=function(){null!=this.data&&this.koIsSelected(this.data.selectedQuestionValue==this)}},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyObjects=t.SurveyObjectItem=void 0;var i=o(8),r=t.SurveyObjectItem=function(){function e(){}return e}();t.SurveyObjects=function(){function e(e,t){this.koObjects=e,this.koSelected=t}return Object.defineProperty(e.prototype,"survey",{get:function(){return this.surveyValue},set:function(e){this.survey!=e&&(this.surveyValue=e,this.rebuild())},enumerable:!0,configurable:!0}),e.prototype.addPage=function(e){var t=this.createPage(e),o=this.survey.pages.indexOf(e);if(o>0){var i=this.survey.pages[o-1];o=this.getItemIndex(i)+1,o+=i.questions.length}else o=1;this.addItem(t,o),o++;for(var r=0;r<e.questions.length;r++){var n=this.createQuestion(e.questions[r]);this.addItem(n,o+r)}this.koSelected(t)},e.prototype.addQuestion=function(e,t){var o=this.getItemIndex(e);if(!(o<0)){var i=e.questions.indexOf(t)+1;o+=i;var r=this.createQuestion(t);this.addItem(r,o),this.koSelected(r)}},e.prototype.selectObject=function(e){for(var t=this.koObjects(),o=0;o<t.length;o++)if(t[o].value==e)return void this.koSelected(t[o])},e.prototype.removeObject=function(e){var t=this.getItemIndex(e);if(!(t<0)){var o=1;if(i.SurveyHelper.getObjectType(e)==i.ObjType.Page){var r=e;o+=r.questions.length}this.koObjects.splice(t,o)}},e.prototype.nameChanged=function(e){var t=this.getItemIndex(e);t<0||this.koObjects()[t].text(this.getText(e))},e.prototype.selectNextQuestion=function(e){var t=this.getSelectedQuestion(),o=this.getItemIndex(t);if(o<0)return t;var r=this.koObjects(),n=o+(e?-1:1);if(n<r.length&&i.SurveyHelper.getObjectType(r[n].value)==i.ObjType.Question)o=n;else for(n=o;n<r.length&&i.SurveyHelper.getObjectType(r[n].value)==i.ObjType.Question;)o=n,n+=e?1:-1;this.koSelected(r[o])},e.prototype.getSelectedQuestion=function(){if(!this.koSelected())return null;var e=this.koSelected().value;return e&&i.SurveyHelper.getObjectType(e)==i.ObjType.Question?e:null},e.prototype.addItem=function(e,t){t>this.koObjects().length?this.koObjects.push(e):this.koObjects.splice(t,0,e)},e.prototype.rebuild=function(){var e=[];if(null==this.survey)return this.koObjects(e),void this.koSelected(null);e.push(this.createItem(this.survey,"Survey"));for(var t=0;t<this.survey.pages.length;t++){var o=this.survey.pages[t];e.push(this.createPage(o));for(var i=0;i<o.questions.length;i++)e.push(this.createQuestion(o.questions[i]))}this.koObjects(e),this.koSelected(this.survey)},e.prototype.createPage=function(e){return this.createItem(e,this.getText(e))},e.prototype.createQuestion=function(e){return this.createItem(e,this.getText(e))},e.prototype.createItem=function(e,t){var o=new r;return o.value=e,o.text=ko.observable(t),o},e.prototype.getItemIndex=function(e){for(var t=this.koObjects(),o=0;o<t.length;o++)if(t[o].value==e)return o;return-1},e.prototype.getText=function(t){var o=e.intend;return i.SurveyHelper.getObjectType(t)!=i.ObjType.Page&&(o+=e.intend),o+i.SurveyHelper.getObjectName(t)},e.intend="...",e}()},function(e,t,o){"use strict";t.__esModule=!0,t.SurveyJSONEditor=void 0;var i=o(17);t.SurveyJSONEditor=function(){function e(){this.isProcessingImmediately=!1,this.timeoutId=-1,this.koText=ko.observable(""),this.koErrors=ko.observableArray();var e=this;this.koText.subscribe(function(t){e.onJsonEditorChanged()})}return e.prototype.init=function(){if(this.hasAceEditor){this.aceEditor=ace.edit("surveyjsJSONEditor");var e=this;this.aceEditor.setTheme("ace/theme/monokai"),this.aceEditor.session.setMode("ace/mode/json"),this.aceEditor.setShowPrintMargin(!1),this.aceEditor.getSession().on("change",function(){e.onJsonEditorChanged()}),this.aceEditor.getSession().setUseWorker(!0),i.SurveyTextWorker.newLineChar=this.aceEditor.session.doc.getNewLineCharacter()}},Object.defineProperty(e.prototype,"hasAceEditor",{get:function(){return"undefined"!=typeof ace},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.hasAceEditor?this.aceEditor.getValue():this.koText()},set:function(e){this.isProcessingImmediately=!0,this.koText(e),this.aceEditor&&(this.aceEditor.setValue(e),this.aceEditor.renderer.updateFull(!0)),this.processJson(e),this.isProcessingImmediately=!1},enumerable:!0,configurable:!0}),e.prototype.show=function(e){this.text=e,this.aceEditor&&this.aceEditor.focus()},Object.defineProperty(e.prototype,"isJsonCorrect",{get:function(){return this.textWorker=new i.SurveyTextWorker(this.text),this.textWorker.isJsonCorrect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"survey",{get:function(){return this.textWorker.survey},enumerable:!0,configurable:!0}),e.prototype.onJsonEditorChanged=function(){if(this.timeoutId>-1&&clearTimeout(this.timeoutId),this.isProcessingImmediately)this.timeoutId=-1;else{var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=-1,t.processJson(t.text)},e.updateTextTimeout)}},e.prototype.processJson=function(e){this.textWorker=new i.SurveyTextWorker(e),this.aceEditor?this.aceEditor.getSession().setAnnotations(this.createAnnotations(e,this.textWorker.errors)):this.koErrors(this.textWorker.errors)},e.prototype.createAnnotations=function(e,t){for(var o=new Array,i=0;i<t.length;i++){var r=t[i],n={row:r.position.start.row,column:r.position.start.column,text:r.text,type:"error"};o.push(n)}return o},e.updateTextTimeout=1e3,e}()},function(e,t){"use strict";t.__esModule=!0;t.html='<div class="svd_container">  <ul class="navbar-default container-fluid nav nav-tabs svd_menu">    <li data-bind="css: { active: koViewType() == \'designer\' }"><a data-bind="click: selectDesignerClick, text: $root.getLocString(\'ed.designer\')"></a></li>    <li data-bind="css: { active: koViewType() == \'test\' }, visible: showTestSurveyTab"><a data-bind="click: selectTestClick, text: $root.getLocString(\'ed.testSurvey\')"></a></li>    <li data-bind="css: { active: koViewType() == \'editor\' }, visible: showJSONEditorTab"><a data-bind="click: selectEditorClick, text: $root.getLocString(\'ed.jsonEditor\')"></a></li>    <!-- <li data-bind="css: { active: koViewType() == \'embed\' }, visible: showEmbededSurveyTab"><a data-bind="click: selectEmbedClick, text: $root.getLocString(\'ed.embedSurvey\')"></a></li> -->    <ul class="nav navbar-nav navbar-right">      <li class="svd_actions" data-bind="visible: koIsShowDesigner"><button type="button" class="btn btn-primary btn-sm" data-bind="enable: undoRedo.koCanUndo, click: doUndoClick"><span data-bind="text: $root.getLocString(\'ed.undo\')"></span></button></li>      <li class="svd_actions" data-bind="visible: koIsShowDesigner"><button type="button" class="btn btn-primary btn-sm" data-bind="enable: undoRedo.koCanRedo, click: doRedoClick"><span data-bind="text: $root.getLocString(\'ed.redo\')"></span></button></li>      <!-- <li class="svd_actions" data-bind="visible: (koIsShowDesigner() && koShowOptions())">        <div class="btn-group inline">          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-bind="text: $root.getLocString(\'ed.options\')">Options <i class="caret"></i></button>          <ul class="dropdown-menu">            <li data-bind="css: { active: koGenerateValidJSON }"><a data-bind="click: generateValidJSONClick, text: $root.getLocString(\'ed.generateValidJSON\')"></a></li>            <li data-bind="css: { active: !koGenerateValidJSON() }"><a data-bind="click: generateReadableJSONClick, text: $root.getLocString(\'ed.generateReadableJSON\')"></a></li>          </ul>        </div>      </li> -->      <li class="svd_actions"><button type="button" class="btn btn-success btn-sm svd_save_btn" data-bind="click: saveButtonClick, visible: koShowSaveButton" id="btn-save" data-loading-text="<i class=\'pe-circle-o-notch pe-spin pe-fw\'></i> Saving..." data-saved-text="<i class=\'pe-save pe-fw\'></i> Saved"><span data-bind="text: $root.getLocString(\'ed.saveSurvey\')"></span></button></li>      <li class="svd_actions"><button type="button" class="btn btn-default btn-sm" onclick="location.href=\'/admin/?w=surveys\'"><span>Back</span></button></li>    </ul>  </ul>  <div class="panel svd_content">    <div class="row svd_survey_designer" data-bind="visible: koViewType() == \'designer\'">      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 panel panel-default svd_toolbox">        <div class="btn-group-vertical" style="width:100%;padding-right:2px">          <!-- ko foreach: questionTypes -->          <div class="btn btn-default" style="text-align:left; margin:1px;width:100%" draggable="true" data-bind="click: $parent.clickQuestion, event: { dragstart: function(el, e) { $parent.draggingQuestion($data, e); return true; }, dragend: function(el, e) { $parent.dragEnd(); } }"><span data-bind="css: \'icon-\' + $data"></span><span class="svd_toolbox_item_text" data-bind="text: $root.getLocString(\'qt.\' + $data)"></span></div>          <!-- /ko  -->          <!-- ko foreach: koCopiedQuestions -->          <div class="btn btn-default" style="text-align:left; margin:1px;width:100%" draggable="true" data-bind="click: $parent.clickCopiedQuestion, event: { dragstart: function(el, e) { $parent.draggingCopiedQuestion($data, e); return true; }, dragend: function(el, e) { $parent.dragEnd(); } }"><span class="icon-default"></span><span class="svd_toolbox_item_text" data-bind="text: name"></span></div>          <!-- /ko  -->        </div>      </div>      <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12 svd_editors">        <div class="svd_pages_editor" data-bind="template: { name: \'pageeditor\', data: pagesEditor }"></div>        <div class="svd_questions_editor" id="scrollableDiv"><div id="surveyjs"></div></div>      </div>      <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 panel panel-default svd_properties">        <div class="panel-heading input-group">          <div class="custom-select"><select class="form-control input-sm" data-bind="options: koObjects, optionsText: \'text\', value: koSelectedObject"></select></div>          <div class="input-group-btn"><button class="btn btn-default" type="button" data-bind="enable: koCanDeleteObject, click: deleteCurrentObject, attr: { title: $root.getLocString(\'ed.delSelObject\') }"><i class="pe-remove"></i></button></div>        </div>        <div data-bind="template: { name: \'objecteditor\', data: selectedObjectEditor }"></div>        <div class="panel-footer" data-bind="visible: surveyVerbs.koHasVerbs"><div data-bind="template: { name: \'objectverbs\', data: surveyVerbs }"></div></div>      </div>    </div>    <div data-bind="visible: koViewType() == \'editor\'"><div data-bind="template: { name: \'jsoneditor\', data: jsonEditor }"></div></div>    <div id="surveyjsTest" data-bind="visible: koViewType() == \'test\', style: { width: koTestSurveyWidth }">      <div class="pull-right svd_actions_sub">        <div class="btn-group inline">          <button type="button" id="surveyTestWidth" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span data-bind="text: $root.getLocString(\'ed.testSurveyWidth\')"></span> <i class="caret"></i></button>          <ul class="dropdown-menu" aria-labelledby="surveyTestWidth">            <li><a data-bind="click: koTestSurveyWidth.bind($data, \'1000px\')"><i class="pe-desktop pe-fw"></i> Desktop</a></li>            <li><a data-bind="click: koTestSurveyWidth.bind($data, \'800px\')"><i class="pe-laptop pe-fw"></i> Laptop</a></li>            <li><a data-bind="click: koTestSurveyWidth.bind($data, \'600px\')"><i class="pe-tablet pe-fw"></i> Tablet</a></li>            <li><a data-bind="click: koTestSurveyWidth.bind($data, \'400px\')"><i class="pe-mobile pe-fw"></i> Mobile</a></li>          </ul>        </div>      </div>      <div id="surveyjsExample"></div>      <div id="surveyjsExampleResults"></div>      <button id="surveyjsExamplereRun" class="btn btn-primary" data-bind="click: selectTestClick, text: $root.getLocString(\'ed.testSurveyAgain\')" style="display:none">Test Again</button>    </div>    <!-- <div id="surveyjsEmbed" data-bind="visible: koViewType() == \'embed\'"><div data-bind="template: { name: \'surveyembeding\', data: surveyEmbeding }"></div></div> -->  </div></div><script type="text/html" id="jsoneditor">  <div data-bind="visible: !hasAceEditor">    <textarea class="svd_json_editor_area form-control" data-bind="textInput: koText"></textarea>    <!-- ko foreach: koErrors -->    <div><span>Error: </span><span data-bind="text: text"></span></div>    <!-- /ko  -->  </div>  <div id="surveyjsJSONEditor" class="svd_json_editor"></div></script><script type="text/html" id="objecteditor">  <table class="table svd_table-nowrap">    <tbody data-bind="foreach: koProperties">      <tr data-bind="click: $parent.changeActiveProperty($data), css: { \'active\': $parent.koActiveProperty() == $data }">        <td data-bind="text: displayName, attr: { title: title }" width="50%" style="font-family:ubuntu; font-size:10px"></td>        <td width="50%" style="font-family:boon; font-size:12px; color:#555">          <span data-bind="text: koText, visible: $parent.koActiveProperty() != $data && (koText() || $data.editorType == \'boolean\'), attr: { title: koText }" style="text-overflow:ellipsis; white-space:nowrap; overflow:hidden"></span>          <div data-bind="visible: $parent.koActiveProperty() == $data || (!koText() && $data.editorType != \'boolean\')">            <!-- ko template: { name: \'propertyeditor-\' + editorType, data: $data } -->            <!-- /ko -->          </div>        </td>      </tr>    </tbody>  </table></script><script type="text/html" id="objectverbs">  <!-- ko foreach: koVerbs -->    <div class="row">      <div class="input-group">        <span  class="input-group-addon input-sm" data-bind="text: text"></span>        <select class="form-control input-sm" data-bind="options: koItems, optionsText: \'text\', optionsValue: \'value\', value: koSelectedItem"></select>      </div>    </div>  <!-- /ko  --></script><script type="text/html" id="pageeditor">  <ul class="nav nav-tabs" data-bind="tabs: true">    <!-- ko foreach: koPages -->    <li data-bind="css: { active: koSelected() }, event: { keydown: function(el, e) { $parent.keyDown(el, e); }, dragstart: function(el, e) { $parent.dragStart(el); return true; }, dragover: function(el, e) { $parent.dragOver(el); }, dragend: function(el, e) { $parent.dragEnd(); }, drop: function(el, e) { $parent.dragDrop(el); } }"><a class="svd_page_nav" data-bind="click: $parent.selectPageClick"><span data-bind="text: title"></span></a></li>    <!-- /ko  -->    <li><button class="btn btn-default svd_add_new_page_btn" data-bind="click: addNewPageClick"><i class="pe-plus"></i></button></li>  </ul></script><script type="text/html" id="surveyembeding">  <div class="row">    <div class="col-sm-3">      <select data-bind="value: koLibraryVersion" class="form-control input-sm">        <option value="knockout" data-bind="text: $root.getLocString(\'ew.knockout\')"></option>        <option value="react" data-bind="text: $root.getLocString(\'ew.react\')"></option>      </select>    </div>    <div class="col-sm-3">      <select data-bind="value: koScriptUsing" class="form-control input-sm">        <option value="bootstrap" data-bind="text: $root.getLocString(\'ew.bootstrap\')"></option>        <option value="standard" data-bind="text: $root.getLocString(\'ew.standard\')"></option>      </select>    </div>    <div class="col-sm-3">      <select data-bind="value: koShowAsWindow" class="form-control input-sm">        <option value="page" data-bind="text: $root.getLocString(\'ew.showOnPage\')"></option>        <option value="window" data-bind="text: $root.getLocString(\'ew.showInWindow\')"></option>      </select>    </div>    <div class="col-sm-3">      <label class="checkbox-inline" data-bind="visible: koHasIds">        <input type="checkbox" data-bind="checked: koLoadSurvey">        <small data-bind="text: $root.getLocString(\'ew.loadFromServer\')"></small>      </label>    </div>  </div>  <br>  <div class="row">    <div class="col-sm-12">      <h4 data-bind="text: $root.getLocString(\'ew.titleScript\')"></h4>      <div data-bind="visible: hasAceEditor">        <div id="surveyEmbedingHead" style="height:70px;width:100%"></div>      </div>      <textarea data-bind="visible: !hasAceEditor, text: koHeadText" style="height:70px; width:100%"></textarea>    </div>    <div class="col-sm-12" data-bind="visible: koVisibleHtml">      <h4 data-bind="text: $root.getLocString(\'ew.titleHtml\')"></h4>      <div data-bind="visible: hasAceEditor">        <div id="surveyEmbedingBody" style="height:30px;width:100%"></div>      </div>      <textarea data-bind="visible: !hasAceEditor, text: koBodyText" style="height:30px; width:100%"></textarea>    </div>    <div class="col-sm-12">      <h4 data-bind="text: $root.getLocString(\'ew.titleJavaScript\')"></h4>      <div data-bind="visible:hasAceEditor">        <div id="surveyEmbedingJava" style="height:300px;width:100%"></div>      </div>      <textarea data-bind="visible:!hasAceEditor, text: koJavaText" style="height:300px;width:100%"></textarea>    </div>  </div></script><script type="text/html" id="propertyeditor-boolean">  <input class="form-control input-sm" type="checkbox" data-bind="checked: koValue"></script><script type="text/html" id="propertyeditor-dropdown">  <div class="custom-select">    <select class="form-control input-sm" data-bind="value: koValue, options: choices" style="width:100%"></select>  </div></script><script type="text/html" id="propertyeditor-html">  <!-- ko template: { name: \'propertyeditor-modal\', data: $data } --><!-- /ko --></script><script type="text/html" id="propertyeditorcontent-html">  <textarea class="form-control" data-bind="value: koValue" style="width:100%" rows="10" autofocus="autofocus"></textarea></script><script type="text/html" id="propertyeditor-itemvalues">  <!-- ko template: { name: \'propertyeditor-modal\', data: $data } --><!-- /ko --></script><script type="text/html" id="propertyeditorcontent-itemvalues">  <div style="overflow-y:auto; overflow-x:hidden; max-height:400px">    <table class="table">      <thead>        <tr>          <th></th>          <th data-bind="text: $root.getLocString(\'pe.value\')"></th>          <th data-bind="text: $root.getLocString(\'pe.text\')"></th>          <th></th>        </tr>      </thead>      <tbody>        <!-- ko foreach: koItems -->        <tr>          <td>            <div class="btn-group" role="group">              <button type="button" class="btn btn-xs" data-bind="visible: $index() > 0, click: $parent.onMoveUpClick"><i class="pe-arrow-up" aria-hidden="true"></i></button>              <button type="button" class="btn btn-xs" style="float:none" data-bind="visible: $index() < $parent.koItems().length - 1, click: $parent.onMoveDownClick"><i class="pe-arrow-down" aria-hidden="true"></i></button>            </div>          </td>          <td>            <input type="text" class="form-control" data-bind="value: koValue" style="width:150px">            <div class="alert alert-danger no-padding" role="alert" data-bind="visible: koHasError, text: $root.getLocString(\'pe.enterNewValue\')"></div>          </td>          <td><input type="text" class="form-control" data-bind="value: koText" style="width:150px"></td>          <td><button type="button" class="btn btn-danger btn-xs" data-bind="click: $parent.onDeleteClick"><i class="pe-trash" aria-hidden="true"></i></button></td>        </tr>        <!-- /ko -->      </tbody>    </table>  </div>  <div class="row btn-toolbar">    <input type="button" class="btn btn-sm btn-success" data-bind="click: onAddClick, value: $root.getLocString(\'pe.addNew\')">    <input type="button" class="btn btn-sm btn-danger" data-bind="click: onClearClick, value: $root.getLocString(\'pe.removeAll\')">  </div></script><script type="text/html" id="propertyeditor-matrixdropdowncolumns">  <!-- ko template: { name: \'propertyeditor-modal\', data: $data } --><!-- /ko --></script><script type="text/html" id="propertyeditorcontent-matrixdropdowncolumns">  <table class="table">    <thead>      <tr>        <th data-bind="text: $root.getLocString(\'pe.required\')"></th>        <th data-bind="text: $root.getLocString(\'pe.cellType\')"></th>        <th data-bind="text: $root.getLocString(\'pe.name\')"></th>        <th data-bind="text: $root.getLocString(\'pe.title\')"></th>        <th></th>      </tr>    </thead>    <tbody>      <!-- ko foreach: koItems -->      <tr>        <td>          <a data-bind="visible: koHasChoices, click: onShowChoicesClick"><span class="glyphicon" data-bind="css: { \'glyphicon-chevron-down\': !koShowChoices(), \'glyphicon-chevron-up\': koShowChoices() }"></span></a>          <input type="checkbox" data-bind="checked: koIsRequired">        </td>        <td>          <select class="form-control input-sm" data-bind="options: cellTypeChoices, value: koCellType"  style="width:110px"></select>        </td>        <td>          <input type="text" class="form-control input-sm" data-bind="value: koName" style="width:100px">          <div class="alert alert-danger no-padding" role="alert" data-bind="visible: koHasError, text: $root.getLocString(\'pe.enterNewValue\')"></div>        </td>        <td><input type="text" class="form-control input-sm" data-bind="value: koTitle" style="width:120px"></td>        <td><button type="button" class="btn btn-danger btn-xs" data-bind="click: $parent.onDeleteClick"><i class="pe-trash" aria-hidden="true"></i></button></td>      </tr>      <tr data-bind="visible: koShowChoices() && koHasChoices()">        <td colspan="4" style="border-top-style:none">          <div class="form-group">            <label class="control-label col-sm-3" data-bind="text: $root.getLocString(\'pe.hasOther\')"></label>            <div class="col-sm-2"><input type="checkbox" data-bind="checked: koHasOther"></div>            <div class="col-sm-7" data-bind="visible: !koHasColCount()"></div>            <label class="control-label col-sm-3" data-bind="visible: koHasColCount, text: $root.getLocString(\'pe.colCount\')"></label>            <select class="form-control input-sm col-sm-4" data-bind="visible: koHasColCount, options: colCountChoices, value: koColCount" style="width:110px"></select>          </div>          <div class="modal-body svd_notopbottompaddings">            <!-- ko template: { name: \'propertyeditorcontent-itemvalues\', data: choicesEditor } -->            <!-- /ko -->          </div>        </td>      </tr>      <!-- /ko -->      <tr>        <td colspan="3">          <div class="row btn-toolbar">            <input type="button" class="btn btn-success" data-bind="click: onAddClick, value: $root.getLocString(\'pe.addNew\')">            <input type="button" class="btn btn-danger" data-bind="click: onClearClick, value: $root.getLocString(\'pe.removeAll\')">          </div>        </td>      </tr>    </tbody>  </table></script><script type="text/html" id="propertyeditor-modal">  <div class="input-group" data-bind="visible: !editor.isEditable">    <span data-bind="text: koText"></span>    <div class="input-group-btn"><button type="button" class="btn btn-default"data-toggle="modal" style="padding:2px" data-bind="attr: { \'data-target\' : modalNameTarget }"><i class="pe-edit" aria-hidden="true"></i></button></div>  </div>  <div class="input-group" data-bind="visible: editor.isEditable" style="display:table">    <input class="form-control input-sm" type="text" data-bind="value: koValue" style="display:table-cell; width:100%">    <div class="input-group-btn"><button type="button" class="btn btn-default" style="display:table-cell; padding:2px"  data-toggle="modal" data-bind="attr: { \'data-target\' : modalNameTarget }"><i class="pe-edit" aria-hidden="true"></i></button></div>  </div>  <div data-bind="attr: { id : modalName }" class="modal fade" role="dialog">    <div class="modal-dialog">      <div class="modal-content">        <div class="modal-header">          <button type="button" class="close" data-dismiss="modal">&times;</button>          <h4 class="modal-title" data-bind="text: editor.title"></h4>        </div>        <div class="modal-body svd_notopbottompaddings">          <!-- ko template: { name: \'propertyeditorcontent-\' + editorType, data: editor } -->          <!-- /ko -->        </div>        <div class="modal-footer">          <input type="button" class="btn btn-primary" data-bind="click: editor.onApplyClick, value: $root.getLocString(\'pe.apply\')" style="width:100px">          <input type="button" class="btn btn-default" data-bind="click: editor.onResetClick, value: $root.getLocString(\'pe.reset\')" style="width:100px">          <input type="button" class="btn btn-default" data-dismiss="modal" data-bind="value: $root.getLocString(\'pe.close\')" style="width:100px">        </div>      </div>    </div>  </div></script><script type="text/html" id="propertyeditor-number">  <input class="form-control input-sm" type="number" data-bind="value: koValue" style="width:100%"></script><script type="text/html" id="propertyeditor-restfull">  <!-- ko template: { name: \'propertyeditor-modal\', data: $data } --><!-- /ko --></script><script type="text/html" id="propertyeditorcontent-restfull">  <form>    <div class="form-group">      <label for="url">URL:</label>      <input id="url" type="text" data-bind="value: koUrl" class="form-control">    </div>    <div class="form-group">      <label for="path">Path:</label>      <input id="path" type="text" data-bind="value: koPath" class="form-control">    </div>    <div class="form-group">      <label for="valueName">valueName:</label>      <input id="valueName" type="text" data-bind="value: koValueName" class="form-control">    </div>    <div class="form-group">      <label for="titleName">titleName:</label>      <input id="titleName" type="text" data-bind="value: koTitleName" class="form-control">    </div>  </form>  <div id="restfullSurvey" style="width:100%; height:150px"></div></script><script type="text/html" id="propertyeditor-string">  <input class="form-control input-sm" type="text" data-bind="value: koValue" style="width:100%"></script><script type="text/html" id="propertyeditor-text">  <!-- ko template: { name: \'propertyeditor-modal\', data: $data } --><!-- /ko --></script><script type="text/html" id="propertyeditorcontent-text">  <textarea class="form-control" data-bind="value: koValue" style="width:100%" rows="10" autofocus="autofocus"></textarea></script><script type="text/html" id="propertyeditor-textitems">  <!-- ko template: { name: \'propertyeditor-modal\', data: $data } --><!-- /ko --></script><script type="text/html" id="propertyeditorcontent-textitems">  <div class="panel">    <table class="table">      <thead>        <tr>          <th data-bind="text: $root.getLocString(\'pe.name\')"></th>          <th data-bind="text: $root.getLocString(\'pe.title\')"></th>          <th></th>        </tr>      </thead>      <tbody>        <!-- ko foreach: koItems -->        <tr>          <td><input type="text" class="form-control" data-bind="value: koName" style="width:200px"></td>          <td><input type="text" class="form-control" data-bind="value: koTitle" style="width:200px"></td>          <td><button type="button" class="btn btn-danger btn-xs" data-bind="click: $parent.onDeleteClick"><i class="pe-trash" aria-hidden="true"></i></button></td>        </tr>        <!-- /ko -->        <tr>          <td colspan="4"><input type="button" class="btn btn-success" data-bind="click: onAddClick, value: $root.getLocString(\'pe.addNew\')"></td>        </tr>      </tbody>    </table>  </div></script><script type="text/html" id="propertyeditor-triggers">  <!-- ko template: { name: \'propertyeditor-modal\', data: $data } --><!-- /ko --></script><script type="text/html" id="propertyeditorcontent-triggers">  <div class="panel">    <div class="panel-heading">      <div class="row input-group">        <button type="button" class="dropdown-toggle input-group-addon" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="pe-plus"></i></button>        <ul class="dropdown-menu">          <!-- ko foreach: availableTriggers -->          <li><a data-bind="click: $parent.onAddClick($data)"><span data-bind="text: $data"></span></a></li>          <!-- /ko  -->        </ul>        <select class="form-control" data-bind="options: koItems, optionsText: \'koText\', value: koSelected"></select>        <span class="input-group-btn"><button type="button" data-bind="enable: koSelected() != null, click: onDeleteClick" class="btn btn-default"><i class="pe-remove"></i></button></span>      </div>    </div>    <div data-bind="visible: koSelected() == null">      <div data-bind="visible: koQuestions().length == 0, text: $root.getLocString(\'pe.noquestions\')"></div>      <div data-bind="visible: koQuestions().length > 0, text: $root.getLocString(\'pe.createtrigger\')"></div>    </div>    <div data-bind="visible: koSelected() != null">      <div data-bind="with: koSelected">        <div class="row form-inline" style="margin-top:10px">          <div class="col-sm-4"><span data-bind="text: $root.getLocString(\'pe.triggerOn\')"></span><select class="form-control input-sm" data-bind="options: $parent.koQuestions, value: koName"></select></div>          <div class="col-sm-4"><select class="form-control input-sm" data-bind="options: availableOperators, optionsValue: \'name\', optionsText: \'text\', value: koOperator"></select></div>          <div class="col-sm-4"><input class="form-control input-sm" type="text" data-bind="visible: koRequireValue, value: koValue"></div>        </div>        <!-- ko if: koType() == \'visibletrigger\' -->        <div class="row">          <div class="col-sm-6">            <!-- ko template: { name: \'propertyeditor-triggersitems\', data: pages } -->            <!-- /ko -->          </div>          <div class="col-sm-6">            <!-- ko template: { name: \'propertyeditor-triggersitems\', data: questions } -->            <!-- /ko -->          </div>        </div>        <!-- /ko -->        <!-- ko if: koType() == \'completetrigger\' -->        <div class="row">          <div style="margin:10px" data-bind="text: $root.getLocString(\'pe.triggerCompleteText\')"></div>        </div>        <!-- /ko -->        <!-- ko if: koType() == \'setvaluetrigger\' -->        <div class="row form-inline" style="margin-top:10px">          <div class="col-sm-6"><span data-bind="text: $root.getLocString(\'pe.triggerSetToName\')"></span><input class="form-control input-sm" type="text" data-bind="value: kosetToName"></div>          <div class="col-sm-1"></div>          <div class="col-sm-5"><span data-bind="text: $root.getLocString(\'pe.triggerSetValue\')"></span><input class="form-control input-sm" type="text" data-bind="value: kosetValue"></div>        </div>        <div class="row form-inline" style="margin-top:10px">          <div class="col-sm-12"><input type="checkbox" data-bind="checked: koisVariable"> <span data-bind="text: $root.getLocString(\'pe.triggerIsVariable\')"></span></div>        </div>        <!-- /ko -->      </div>    </div>  </div></script><script type="text/html" id="propertyeditor-triggersitems">  <div class="panel no-margins no-padding">    <div class="panel-heading"><span data-bind="text: title"></span></div>    <div class="input-group">      <select class="form-control" multiple="multiple" data-bind="options: koChoosen, value: koChoosenSelected"></select>      <span class="input-group-btn" style="vertical-align:top"><button type="button" data-bind="enable: koChoosenSelected() != null, click: onDeleteClick" class="btn"><i class="pe-remove"></i></button></span>    </div>    <div class="input-group" style="margin-top:5px">      <select class="form-control" data-bind="options: koObjects, value: koSelected"></select>      <span class="input-group-btn"><button type="button" data-bind="enable: koSelected() != null, click: onAddClick" style="width:40px" class="btn"><i class="pe-plus"></i></button></span>    </div>  </div></script><script type="text/html" id="propertyeditor-validators">  <!-- ko template: { name: \'propertyeditor-modal\', data: $data } --><!-- /ko --></script><script type="text/html" id="propertyeditorcontent-validators">  <div class="panel">    <div class="panel-heading">      <div class="row input-group">        <button type="button" class="dropdown-toggle input-group-addon" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="pe-plus"></i></button>        <ul class="dropdown-menu">          <!-- ko foreach: availableValidators -->          <li><a data-bind="click: $parent.onAddClick($data)"><span data-bind="text: $data"></span></a></li>          <!-- /ko  -->        </ul>        <select class="form-control" data-bind="options: koItems, optionsText: \'text\', value: koSelected"></select>        <span class="input-group-btn"><button type="button" data-bind="enable: koSelected() != null, click: onDeleteClick" class="btn"><i class="pe-remove"></i></button></span>      </div>    </div>    <div data-bind="template: { name: \'objecteditor\', data: selectedObjectEditor }"></div>  </div></script>';
},function(e,t){"use strict";t.__esModule=!0;t.html="<div data-bind=\"event: { dragenter: function(el, e) { dragEnter(e); }, dragleave: function(el, e) { dragLeave(e); }, dragover: function(el, e) { return false; }, drop: function(el, e) { dragDrop(e);} }\">  <h4 data-bind=\"visible: (title.length > 0) && data.showPageTitles, text: koNo() + processedTitle, css: $root.css.pageTitle\"></h4>  <!-- ko foreach: { data: rows, as: 'row'} -->  <div class=\"svd_question_container\" data-bind=\"visible: row.koVisible, css: $root.css.row\">    <!-- ko foreach: { data: row.questions, as: 'question' , afterRender: row.koAfterRender } -->    <div data-bind=\"visible: question.koIsDragging\">      <!-- ko template: { if: $root.koDraggingSource(), name: 'survey-question', data: $root.koDraggingSource(), as: 'question', templateOptions: { isDragging: true } } -->      <!-- /ko -->    </div>    <!-- ko template: { name: 'survey-question', data: question, templateOptions: { isDragging: false } } -->    <!-- /ko -->  <!-- /ko -->  </div>  <!-- /ko -->  <div class=\"well\" data-bind=\"visible: $root.isDesignMode && questions.length == 0\">    <span data-bind=\"visible: !koDraggingBottom(), text: $root.getEditorLocString('survey.dropQuestion')\"></span>    <div data-bind=\"visible: koDraggingBottom\">      <!-- ko template: { if: $root.koDraggingSource(), name: 'survey-question', data: $root.koDraggingSource(), as: 'question', templateOptions: { isDragging: true } } -->      <!-- /ko -->    </div>  </div>  <div data-bind=\"visible: questions.length > 0 && koDraggingBottom()\">    <!-- ko template: { if: $root.koDraggingSource(), name: 'survey-question', data: $root.koDraggingSource(), as: 'question', templateOptions: { isDragging: true } } -->    <!-- /ko -->  </div></div>"},function(e,t){"use strict";t.__esModule=!0;t.html='<div class="svd_question" style="vertical-align:top" data-bind="css: { highlight: koErrors().length > 0 }, style: { display: question.koVisible() || $root.isDesignMode ? \'inline-block\': \'none\', marginLeft: question.koMarginLeft, paddingRight: question.koPaddingRight, width: question.koRenderWidth }, attr : { id: id, draggable: $root.isDesignMode }, click: $root.isDesignMode ? koOnClick: null, event: { keydown: function(el, e) { if(e.witch == 46) $root.deleteCurrentObjectClick(); return true; }, dragstart: function(el, e) { dragStart(e); return true; }, dragover: function(el, e) { if(!question.isDragging) dragOver(e); }, dragend: function(el, e) { dragEnd(e); }, drop: function(el, e) { dragDrop(e); } }, css: { svd_q_design_border: $root.isDesignMode, svd_q_selected: koIsSelected, \'well well-sm\': $root.isDesignMode }">  <div data-bind="css: { svd_q_design: $root.isDesignMode }, style: { opacity: question.koIsDraggingSource() ? 0.4 : 1 }">    <div class="alert alert-danger" style="font-size:0.85rem" data-bind="visible: koErrors().length > 0, foreach: koErrors" style="font-size:0.85rem"><i class="pe-exclamation-sign" aria-hidden="true"></i> <span data-bind="text: $data.getText()"></span></div>    <!-- ko if: question.hasTitle -->    <h5 data-bind="visible: $root.questionTitleLocation == \'top\', text: question.koTitle(), css: $root.css.question.title"></h5>    <!-- /ko -->    <!-- <div class="label label-needanswer" data-bind="visible: koErrors().length > 0, foreach: koErrors"><span data-bind="text: $data.getText()"></span></div> -->    <!-- ko template: { name: \'survey-question-\' + question.getType(), data: question } -->    <!-- /ko -->    <div data-bind="visible: question.hasComment" class="commentText">      <div data-bind="text: question.commentText"></div>      <div data-bind="template: { name: \'survey-comment\', data: { \'question\': question, \'visible\': true } }"></div>    </div>    <!-- ko if: question.hasTitle -->    <h5 data-bind="visible: $root.questionTitleLocation == \'bottom\', text: question.koTitle(), css: $root.css.question.title"></h5>    <!-- /ko -->  </div>  <div class="svd_question_menu" data-bind="visible: koIsSelected">    <button type="button" class="btn btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-option-horizontal"></span></button>    <ul class="dropdown-menu">      <li><button class="btn btn-primary btn-xs" data-bind="click: $root.copyQuestionClick, text: $root.getEditorLocString(\'survey.addToToolbox\')"></button></li>      <li><button class="btn btn-primary btn-xs" data-bind="click: $root.fastCopyQuestionClick, text: $root.getEditorLocString(\'survey.copy\')"></button></li>      <li><button class="btn btn-primary btn-xs" data-bind="click: $root.deleteCurrentObjectClick, text: $root.getEditorLocString(\'survey.deleteQuestion\')"></button></li>    </ul>  </div></div>'}])});